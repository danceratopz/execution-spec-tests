
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A collection of test cases implemented in Python for Ethereum execution clients">
      
      
      
        <link rel="canonical" href="https://danceratopz.github.io/execution-spec-tests/main/library/pytest_plugins/test_filler/">
      
      
      
      <link rel="icon" href="../../../img/ETH-logo-icon.svg">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.17">
    
    
      
        <title>Test Filler Plugin - Ethereum Execution Spec Tests</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Test Filler Plugin - Ethereum Execution Spec Tests" >
      
        <meta  property="og:description"  content="A collection of test cases implemented in Python for Ethereum execution clients" >
      
        <meta  property="og:image"  content="https://danceratopz.github.io/execution-spec-tests/main/assets/images/social/library/pytest_plugins/test_filler.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://danceratopz.github.io/execution-spec-tests/main/library/pytest_plugins/test_filler/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Test Filler Plugin - Ethereum Execution Spec Tests" >
      
        <meta  name="twitter:description"  content="A collection of test cases implemented in Python for Ethereum execution clients" >
      
        <meta  name="twitter:image"  content="https://danceratopz.github.io/execution-spec-tests/main/assets/images/social/library/pytest_plugins/test_filler.png" >
      
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#test-filler-plugin" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
  Note: This is a development version of the docs. Please use the official documentation at <a href="https://ethereum.github.io/execution-spec-tests/">https://ethereum.github.io/execution-spec-tests/</a>

          </div>
          
        </aside>
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Ethereum Execution Spec Tests" class="md-header__button md-logo" aria-label="Ethereum Execution Spec Tests" data-md-component="logo">
      
  <img src="../../../img/Ethereum-logo-600px.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Ethereum Execution Spec Tests
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Test Filler Plugin
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_3" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_3">
            
              <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/danceratopz/execution-spec-tests" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    execution-spec-tests
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      Overview
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../getting_started/quick_start/" class="md-tabs__link">
        Getting Started
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../writing_tests/" class="md-tabs__link">
        Writing Tests
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../tutorials/state_transition/" class="md-tabs__link">
        Tutorials
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../getting_help/" class="md-tabs__link">
      Getting Help
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../dev/" class="md-tabs__link">
        Developer Doc
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link">
        Library Reference
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../tests/" class="md-tabs__link">
        Test case reference
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Ethereum Execution Spec Tests" class="md-nav__button md-logo" aria-label="Ethereum Execution Spec Tests" data-md-component="logo">
      
  <img src="../../../img/Ethereum-logo-600px.png" alt="logo">

    </a>
    Ethereum Execution Spec Tests
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/danceratopz/execution-spec-tests" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    execution-spec-tests
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/quick_start/" class="md-nav__link">
        Quick Start
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/setup_vs_code/" class="md-nav__link">
        VS Code Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/repository_overview/" class="md-nav__link">
        Repository Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/executing_tests_command_line/" class="md-nav__link">
        Executing Tests at a Prompt
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/executing_tests_vs_code/" class="md-nav__link">
        Executing Tests in VS Code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/executing_tests_dev_fork/" class="md-nav__link">
        Executing Tests for Features Under Development
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/debugging_t8n_tools/" class="md-nav__link">
        Debugging Transition Tools
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../writing_tests/">Writing Tests</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Writing Tests
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../writing_tests/code_standards/" class="md-nav__link">
        Code Standards
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../writing_tests/types_of_tests/" class="md-nav__link">
        Types of Test
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../writing_tests/adding_a_new_test/" class="md-nav__link">
        Adding a New Test
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../writing_tests/writing_a_new_test/" class="md-nav__link">
        Writing a New Test
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../writing_tests/reference_specification/" class="md-nav__link">
        Referencing an EIP Spec Version
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../writing_tests/verifying_changes/" class="md-nav__link">
        Verifying Changes Locally
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/state_transition/" class="md-nav__link">
        State Transition Tests
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_help/" class="md-nav__link">
        Getting Help
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../dev/">Developer Doc</a>
          
            <label for="__nav_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Developer Doc
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev/docs/" class="md-nav__link">
        Documentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev/coding_style/" class="md-nav__link">
        Coding Style
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev/precommit/" class="md-nav__link">
        Enabling Precommit Checks
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../">Library Reference</a>
          
            <label for="__nav_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Library Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../evm_transition_tool/" class="md-nav__link">
        EVM Transition Tool Package
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ethereum_test_tools/" class="md-nav__link">
        Ethereum Test Tools Package
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ethereum_test_forks/" class="md-nav__link">
        Ethereum Test Forks Package
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Pytest Plugins
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/">Test case reference</a>
          
            <label for="__nav_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Test case reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/cancun/">Cancun</a>
          
            <label for="__nav_8_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2">
          <span class="md-nav__icon md-icon"></span>
          Cancun
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_2" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/cancun/eip4788_beacon_root/">EIP-4788 Beacon Root</a>
          
            <label for="__nav_8_2_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_2">
          <span class="md-nav__icon md-icon"></span>
          EIP-4788 Beacon Root
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_2_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/cancun/eip4788_beacon_root/test_beacon_root_contract/">Test Beacon Root Contract</a>
          
            <label for="__nav_8_2_2_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_2_2">
          <span class="md-nav__icon md-icon"></span>
          Test Beacon Root Contract
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/cancun/eip4788_beacon_root/test_beacon_root_contract/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_2_3" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/cancun/eip4788_beacon_root/test_blocks_beacon_root_contract/">Test Blocks Beacon Root Contract</a>
          
            <label for="__nav_8_2_2_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_2_3">
          <span class="md-nav__icon md-icon"></span>
          Test Blocks Beacon Root Contract
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/cancun/eip4788_beacon_root/test_blocks_beacon_root_contract/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_3" >
      
      
        
          
            
          
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/cancun/eip4844_blobs/">EIP-4844 Blobs</a>
          
            <label for="__nav_8_2_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_3">
          <span class="md-nav__icon md-icon"></span>
          EIP-4844 Blobs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/cancun/eip4844_blobs/spec/" class="md-nav__link">
        Spec
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_3_3" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/cancun/eip4844_blobs/test_blob_txs/">Test Blob Txs</a>
          
            <label for="__nav_8_2_3_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_3_3">
          <span class="md-nav__icon md-icon"></span>
          Test Blob Txs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/cancun/eip4844_blobs/test_blob_txs/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_3_4" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/cancun/eip4844_blobs/test_blob_txs_full/">Test Blob Txs Full</a>
          
            <label for="__nav_8_2_3_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_3_4">
          <span class="md-nav__icon md-icon"></span>
          Test Blob Txs Full
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/cancun/eip4844_blobs/test_blob_txs_full/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_3_5" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/cancun/eip4844_blobs/test_blobhash_opcode/">Test Blobhash Opcode</a>
          
            <label for="__nav_8_2_3_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_3_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_3_5">
          <span class="md-nav__icon md-icon"></span>
          Test Blobhash Opcode
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/cancun/eip4844_blobs/test_blobhash_opcode/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_3_6" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/cancun/eip4844_blobs/test_blobhash_opcode_contexts/">Test Blobhash Opcode Contexts</a>
          
            <label for="__nav_8_2_3_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_3_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_3_6">
          <span class="md-nav__icon md-icon"></span>
          Test Blobhash Opcode Contexts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/cancun/eip4844_blobs/test_blobhash_opcode_contexts/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_3_7" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/cancun/eip4844_blobs/test_excess_blob_gas/">Test Excess Blob Gas</a>
          
            <label for="__nav_8_2_3_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_3_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_3_7">
          <span class="md-nav__icon md-icon"></span>
          Test Excess Blob Gas
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/cancun/eip4844_blobs/test_excess_blob_gas/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_3_8" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/cancun/eip4844_blobs/test_excess_blob_gas_fork_transition/">Test Excess Blob Gas Fork Transition</a>
          
            <label for="__nav_8_2_3_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_3_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_3_8">
          <span class="md-nav__icon md-icon"></span>
          Test Excess Blob Gas Fork Transition
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/cancun/eip4844_blobs/test_excess_blob_gas_fork_transition/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_3_9" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/cancun/eip4844_blobs/test_point_evaluation_precompile/">Test Point Evaluation Precompile</a>
          
            <label for="__nav_8_2_3_9">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_3_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_3_9">
          <span class="md-nav__icon md-icon"></span>
          Test Point Evaluation Precompile
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/cancun/eip4844_blobs/test_point_evaluation_precompile/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_3_10" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/cancun/eip4844_blobs/test_point_evaluation_precompile_gas/">Test Point Evaluation Precompile Gas</a>
          
            <label for="__nav_8_2_3_10">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_3_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_3_10">
          <span class="md-nav__icon md-icon"></span>
          Test Point Evaluation Precompile Gas
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/cancun/eip4844_blobs/test_point_evaluation_precompile_gas/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_3_11" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8_2_3_11" id="__nav_8_2_3_11_label" tabindex="0">
          Point Evaluation Vectors
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_3_11_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_3_11">
          <span class="md-nav__icon md-icon"></span>
          Point Evaluation Vectors
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/cancun/eip4844_blobs/point_evaluation_vectors/README_./" class="md-nav__link">
        Readme
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_4" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/cancun/eip5656_mcopy/">EIP-5656 Mcopy</a>
          
            <label for="__nav_8_2_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_4">
          <span class="md-nav__icon md-icon"></span>
          EIP-5656 Mcopy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_4_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/cancun/eip5656_mcopy/test_mcopy/">Test Mcopy</a>
          
            <label for="__nav_8_2_4_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_4_2">
          <span class="md-nav__icon md-icon"></span>
          Test Mcopy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/cancun/eip5656_mcopy/test_mcopy/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_4_3" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/cancun/eip5656_mcopy/test_mcopy_contexts/">Test Mcopy Contexts</a>
          
            <label for="__nav_8_2_4_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_4_3">
          <span class="md-nav__icon md-icon"></span>
          Test Mcopy Contexts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/cancun/eip5656_mcopy/test_mcopy_contexts/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_4_4" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/cancun/eip5656_mcopy/test_mcopy_memory_expansion/">Test Mcopy Memory Expansion</a>
          
            <label for="__nav_8_2_4_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_4_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_4_4">
          <span class="md-nav__icon md-icon"></span>
          Test Mcopy Memory Expansion
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/cancun/eip5656_mcopy/test_mcopy_memory_expansion/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_5" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/cancun/eip6780_selfdestruct/">EIP-6780 Selfdestruct</a>
          
            <label for="__nav_8_2_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_2_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_5">
          <span class="md-nav__icon md-icon"></span>
          EIP-6780 Selfdestruct
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_5_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/cancun/eip6780_selfdestruct/test_selfdestruct/">Test Selfdestruct</a>
          
            <label for="__nav_8_2_5_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_5_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2_5_2">
          <span class="md-nav__icon md-icon"></span>
          Test Selfdestruct
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/cancun/eip6780_selfdestruct/test_selfdestruct/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/shanghai/">Shanghai</a>
          
            <label for="__nav_8_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_3">
          <span class="md-nav__icon md-icon"></span>
          Shanghai
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/shanghai/eip3651_warm_coinbase/">EIP-3651 Warm Coinbase</a>
          
            <label for="__nav_8_3_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_3_2">
          <span class="md-nav__icon md-icon"></span>
          EIP-3651 Warm Coinbase
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3_2_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/shanghai/eip3651_warm_coinbase/test_warm_coinbase/">Test Warm Coinbase</a>
          
            <label for="__nav_8_3_2_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_3_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_3_2_2">
          <span class="md-nav__icon md-icon"></span>
          Test Warm Coinbase
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/shanghai/eip3651_warm_coinbase/test_warm_coinbase/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3_3" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/shanghai/eip3855_push0/">EIP-3855 Push0</a>
          
            <label for="__nav_8_3_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_3_3">
          <span class="md-nav__icon md-icon"></span>
          EIP-3855 Push0
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3_3_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/shanghai/eip3855_push0/test_push0/">Test Push0</a>
          
            <label for="__nav_8_3_3_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_3_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_3_3_2">
          <span class="md-nav__icon md-icon"></span>
          Test Push0
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/shanghai/eip3855_push0/test_push0/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3_4" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/shanghai/eip3860_initcode/">EIP-3860 Initcode</a>
          
            <label for="__nav_8_3_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_3_4">
          <span class="md-nav__icon md-icon"></span>
          EIP-3860 Initcode
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3_4_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/shanghai/eip3860_initcode/test_initcode/">Test Initcode</a>
          
            <label for="__nav_8_3_4_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_3_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_3_4_2">
          <span class="md-nav__icon md-icon"></span>
          Test Initcode
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/shanghai/eip3860_initcode/test_initcode/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3_5" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/shanghai/eip4895_withdrawals/">EIP-4895 Withdrawals</a>
          
            <label for="__nav_8_3_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_3_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_3_5">
          <span class="md-nav__icon md-icon"></span>
          EIP-4895 Withdrawals
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3_5_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/shanghai/eip4895_withdrawals/test_withdrawals/">Test Withdrawals</a>
          
            <label for="__nav_8_3_5_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_3_5_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_3_5_2">
          <span class="md-nav__icon md-icon"></span>
          Test Withdrawals
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/shanghai/eip4895_withdrawals/test_withdrawals/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/merge/">Merge</a>
          
            <label for="__nav_8_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_4">
          <span class="md-nav__icon md-icon"></span>
          Merge
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/merge/security/">Security</a>
          
            <label for="__nav_8_4_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_4_2">
          <span class="md-nav__icon md-icon"></span>
          Security
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4_2_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/merge/security/test_selfdestruct_balance_bug/">Test Selfdestruct Balance Bug</a>
          
            <label for="__nav_8_4_2_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_4_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_4_2_2">
          <span class="md-nav__icon md-icon"></span>
          Test Selfdestruct Balance Bug
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/merge/security/test_selfdestruct_balance_bug/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_5" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/berlin/">Berlin</a>
          
            <label for="__nav_8_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_5">
          <span class="md-nav__icon md-icon"></span>
          Berlin
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_5_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/berlin/eip2930_access_list/">EIP-2930 Access List</a>
          
            <label for="__nav_8_5_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_5_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_5_2">
          <span class="md-nav__icon md-icon"></span>
          EIP-2930 Access List
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_5_2_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/berlin/eip2930_access_list/test_acl/">Test ACL</a>
          
            <label for="__nav_8_5_2_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_5_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_5_2_2">
          <span class="md-nav__icon md-icon"></span>
          Test ACL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/berlin/eip2930_access_list/test_acl/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_6" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/istanbul/">Istanbul</a>
          
            <label for="__nav_8_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_6">
          <span class="md-nav__icon md-icon"></span>
          Istanbul
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_6_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/istanbul/eip1344_chainid/">EIP-1344 CHAINID</a>
          
            <label for="__nav_8_6_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_6_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_6_2">
          <span class="md-nav__icon md-icon"></span>
          EIP-1344 CHAINID
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_6_2_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/istanbul/eip1344_chainid/test_chainid/">Test CHAINID</a>
          
            <label for="__nav_8_6_2_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_6_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_6_2_2">
          <span class="md-nav__icon md-icon"></span>
          Test CHAINID
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/istanbul/eip1344_chainid/test_chainid/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_7" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/homestead/">Homestead</a>
          
            <label for="__nav_8_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_7">
          <span class="md-nav__icon md-icon"></span>
          Homestead
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_7_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/homestead/yul/">Yul</a>
          
            <label for="__nav_8_7_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_7_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_7_2">
          <span class="md-nav__icon md-icon"></span>
          Yul
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_7_2_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/homestead/yul/test_yul_example/">Test Yul Example</a>
          
            <label for="__nav_8_7_2_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_7_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_7_2_2">
          <span class="md-nav__icon md-icon"></span>
          Test Yul Example
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/homestead/yul/test_yul_example/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_8" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/frontier/">Frontier</a>
          
            <label for="__nav_8_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_8">
          <span class="md-nav__icon md-icon"></span>
          Frontier
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_8_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/frontier/opcodes/">Opcodes</a>
          
            <label for="__nav_8_8_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_8_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_8_2">
          <span class="md-nav__icon md-icon"></span>
          Opcodes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_8_2_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../tests/frontier/opcodes/test_dup/">Test DUP</a>
          
            <label for="__nav_8_8_2_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_8_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_8_2_2">
          <span class="md-nav__icon md-icon"></span>
          Test DUP
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/frontier/opcodes/test_dup/index/test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler" class="md-nav__link">
    pytest_plugins.test_filler
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler" class="md-nav__link">
    pytest_plugins.test_filler.test_filler
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.fill_test" class="md-nav__link">
    fill_test()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.pytest_addoption" class="md-nav__link">
    pytest_addoption()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.StateTest" class="md-nav__link">
    StateTest
  </a>
  
    <nav class="md-nav" aria-label="StateTest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.spec.state_test.StateTest.pytest_parameter_name" class="md-nav__link">
    pytest_parameter_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.spec.state_test.StateTest.make_genesis" class="md-nav__link">
    make_genesis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.spec.state_test.StateTest.make_blocks" class="md-nav__link">
    make_blocks()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.BlockchainTest" class="md-nav__link">
    BlockchainTest
  </a>
  
    <nav class="md-nav" aria-label="BlockchainTest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.spec.blockchain_test.BlockchainTest.pytest_parameter_name" class="md-nav__link">
    pytest_parameter_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.spec.blockchain_test.BlockchainTest.make_genesis" class="md-nav__link">
    make_genesis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.spec.blockchain_test.BlockchainTest.make_block" class="md-nav__link">
    make_block()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.spec.blockchain_test.BlockchainTest.make_blocks" class="md-nav__link">
    make_blocks()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.Yul" class="md-nav__link">
    Yul
  </a>
  
    <nav class="md-nav" aria-label="Yul">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.code.yul.Yul.__bytes__" class="md-nav__link">
    __bytes__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.code.yul.Yul.__len__" class="md-nav__link">
    __len__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.code.yul.Yul.__add__" class="md-nav__link">
    __add__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.code.yul.Yul.__radd__" class="md-nav__link">
    __radd__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.code.yul.Yul.version" class="md-nav__link">
    version()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.TransitionTool" class="md-nav__link">
    TransitionTool
  </a>
  
    <nav class="md-nav" aria-label="TransitionTool">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#evm_transition_tool.transition_tool.TransitionTool.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evm_transition_tool.transition_tool.TransitionTool.__init_subclass__" class="md-nav__link">
    __init_subclass__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evm_transition_tool.transition_tool.TransitionTool.register_tool" class="md-nav__link">
    register_tool()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evm_transition_tool.transition_tool.TransitionTool.set_default_tool" class="md-nav__link">
    set_default_tool()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evm_transition_tool.transition_tool.TransitionTool.from_binary_path" class="md-nav__link">
    from_binary_path()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evm_transition_tool.transition_tool.TransitionTool.detect_binary" class="md-nav__link">
    detect_binary()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evm_transition_tool.transition_tool.TransitionTool.version" class="md-nav__link">
    version()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evm_transition_tool.transition_tool.TransitionTool.is_fork_supported" class="md-nav__link">
    is_fork_supported()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evm_transition_tool.transition_tool.TransitionTool.shutdown" class="md-nav__link">
    shutdown()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evm_transition_tool.transition_tool.TransitionTool.reset_traces" class="md-nav__link">
    reset_traces()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evm_transition_tool.transition_tool.TransitionTool.append_traces" class="md-nav__link">
    append_traces()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evm_transition_tool.transition_tool.TransitionTool.get_traces" class="md-nav__link">
    get_traces()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evm_transition_tool.transition_tool.TransitionTool.collect_traces" class="md-nav__link">
    collect_traces()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evm_transition_tool.transition_tool.TransitionTool.evaluate" class="md-nav__link">
    evaluate()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evm_transition_tool.transition_tool.TransitionTool.calc_state_root" class="md-nav__link">
    calc_state_root()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.BaseTestConfig" class="md-nav__link">
    BaseTestConfig
  </a>
  
    <nav class="md-nav" aria-label="BaseTestConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.spec.base_test.BaseTestConfig.disable_hive" class="md-nav__link">
    disable_hive
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.BaseTest" class="md-nav__link">
    BaseTest
  </a>
  
    <nav class="md-nav" aria-label="BaseTest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.spec.base_test.BaseTest.make_genesis" class="md-nav__link">
    make_genesis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.spec.base_test.BaseTest.make_blocks" class="md-nav__link">
    make_blocks()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.spec.base_test.BaseTest.pytest_parameter_name" class="md-nav__link">
    pytest_parameter_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.spec.base_test.BaseTest.get_next_transition_tool_output_path" class="md-nav__link">
    get_next_transition_tool_output_path()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.pytest_configure" class="md-nav__link">
    pytest_configure()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.EIPSpecTestItem" class="md-nav__link">
    EIPSpecTestItem
  </a>
  
    <nav class="md-nav" aria-label="EIPSpecTestItem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytest_plugins.spec_version_checker.spec_version_checker.EIPSpecTestItem.from_parent" class="md-nav__link">
    from_parent()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytest_plugins.spec_version_checker.spec_version_checker.EIPSpecTestItem.runtest" class="md-nav__link">
    runtest()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytest_plugins.spec_version_checker.spec_version_checker.EIPSpecTestItem.reportinfo" class="md-nav__link">
    reportinfo()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.pytest_report_header" class="md-nav__link">
    pytest_report_header()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.evm_bin" class="md-nav__link">
    evm_bin()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.solc_bin" class="md-nav__link">
    solc_bin()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.t8n" class="md-nav__link">
    t8n()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.base_test_config" class="md-nav__link">
    base_test_config()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.strip_test_prefix" class="md-nav__link">
    strip_test_prefix()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.convert_test_name_to_path" class="md-nav__link">
    convert_test_name_to_path()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.FixtureCollector" class="md-nav__link">
    FixtureCollector
  </a>
  
    <nav class="md-nav" aria-label="FixtureCollector">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.FixtureCollector.add_fixture" class="md-nav__link">
    add_fixture()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.FixtureCollector.dump_fixtures" class="md-nav__link">
    dump_fixtures()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.fixture_collector" class="md-nav__link">
    fixture_collector()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.engine" class="md-nav__link">
    engine()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.filler_path" class="md-nav__link">
    filler_path()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.eips" class="md-nav__link">
    eips()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.yul" class="md-nav__link">
    yul()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.state_test" class="md-nav__link">
    state_test()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.blockchain_test" class="md-nav__link">
    blockchain_test()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.pytest_collection_modifyitems" class="md-nav__link">
    pytest_collection_modifyitems()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.pytest_make_parametrize_id" class="md-nav__link">
    pytest_make_parametrize_id()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.pytest_runtest_call" class="md-nav__link">
    pytest_runtest_call()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytest_plugins.test_filler.test_filler.Fixture" class="md-nav__link">
    Fixture
  </a>
  
    <nav class="md-nav" aria-label="Fixture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.common.types.Fixture.__post_init__" class="md-nav__link">
    __post_init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.common.types.Fixture.to_json" class="md-nav__link">
    to_json()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ethereum_test_tools.common.types.Fixture.fill_info" class="md-nav__link">
    fill_info()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="test-filler-plugin">Test Filler Plugin<a class="headerlink" href="#test-filler-plugin" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">


<a id="pytest_plugins.test_filler"></a>
  <div class="doc doc-contents first">
  
      <p>A pytest plugin that provides fixtures that fill tests and generate
fixtures.</p>

  

  <div class="doc doc-children">









  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="pytest_plugins.test_filler.test_filler"></a>
  <div class="doc doc-contents first">
  
      <p>Top-level pytest configuration file providing:
- Command-line options,
- Test-fixtures that can be used by all test cases,
and that modifies pytest hooks in order to fill test specs for all tests and
writes the generated fixtures to file.</p>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.fill_test" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fill_test</span><span class="p">(</span><span class="n">t8n</span><span class="p">,</span> <span class="n">test_spec</span><span class="p">,</span> <span class="n">fork</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">spec</span><span class="p">,</span> <span class="n">eips</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#pytest_plugins.test_filler.test_filler.fill_test" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Fills fixtures for the specified fork.</p>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/filling/fill.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fill_test</span><span class="p">(</span>
    <span class="n">t8n</span><span class="p">:</span> <span class="n">TransitionTool</span><span class="p">,</span>
    <span class="n">test_spec</span><span class="p">:</span> <span class="n">BaseTest</span><span class="p">,</span>
    <span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">,</span>
    <span class="n">engine</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">spec</span><span class="p">:</span> <span class="n">ReferenceSpec</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">eips</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Fixture</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fills fixtures for the specified fork.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">t8n</span><span class="o">.</span><span class="n">reset_traces</span><span class="p">()</span>

    <span class="n">pre</span><span class="p">,</span> <span class="n">genesis_rlp</span><span class="p">,</span> <span class="n">genesis</span> <span class="o">=</span> <span class="n">test_spec</span><span class="o">.</span><span class="n">make_genesis</span><span class="p">(</span><span class="n">t8n</span><span class="p">,</span> <span class="n">fork</span><span class="p">)</span>

    <span class="p">(</span><span class="n">blocks</span><span class="p">,</span> <span class="n">head</span><span class="p">,</span> <span class="n">alloc</span><span class="p">)</span> <span class="o">=</span> <span class="n">test_spec</span><span class="o">.</span><span class="n">make_blocks</span><span class="p">(</span>
        <span class="n">t8n</span><span class="p">,</span>
        <span class="n">genesis</span><span class="p">,</span>
        <span class="n">pre</span><span class="p">,</span>
        <span class="n">fork</span><span class="p">,</span>
        <span class="n">eips</span><span class="o">=</span><span class="n">eips</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">fork_name</span> <span class="o">=</span> <span class="n">fork</span><span class="o">.</span><span class="n">name</span><span class="p">()</span>
    <span class="n">fixture</span> <span class="o">=</span> <span class="n">Fixture</span><span class="p">(</span>
        <span class="n">blocks</span><span class="o">=</span><span class="n">blocks</span><span class="p">,</span>
        <span class="n">genesis</span><span class="o">=</span><span class="n">genesis</span><span class="p">,</span>
        <span class="n">genesis_rlp</span><span class="o">=</span><span class="n">genesis_rlp</span><span class="p">,</span>
        <span class="n">head</span><span class="o">=</span><span class="n">head</span><span class="p">,</span>
        <span class="n">fork</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">fork_name</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">eip</span><span class="p">)</span> <span class="k">for</span> <span class="n">eip</span> <span class="ow">in</span> <span class="n">eips</span><span class="p">])</span> <span class="k">if</span> <span class="n">eips</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">fork_name</span><span class="p">,</span>
        <span class="n">pre_state</span><span class="o">=</span><span class="n">pre</span><span class="p">,</span>
        <span class="n">post_state</span><span class="o">=</span><span class="n">alloc_to_accounts</span><span class="p">(</span><span class="n">alloc</span><span class="p">),</span>
        <span class="n">seal_engine</span><span class="o">=</span><span class="n">engine</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">test_spec</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">fixture</span><span class="o">.</span><span class="n">fill_info</span><span class="p">(</span><span class="n">t8n</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fixture</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.pytest_addoption" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pytest_addoption</span><span class="p">(</span><span class="n">parser</span><span class="p">)</span></code>

<a href="#pytest_plugins.test_filler.test_filler.pytest_addoption" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Adds command-line options to pytest.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">pytest_addoption</span><span class="p">(</span><span class="n">parser</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds command-line options to pytest.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">evm_group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">getgroup</span><span class="p">(</span><span class="s2">&quot;evm&quot;</span><span class="p">,</span> <span class="s2">&quot;Arguments defining evm executable behavior&quot;</span><span class="p">)</span>
    <span class="n">evm_group</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span>
        <span class="s2">&quot;--evm-bin&quot;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store&quot;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;evm_bin&quot;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="n">Path</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="p">(</span>
            <span class="s2">&quot;Path to an evm executable that provides `t8n`. Default: First &#39;evm&#39; entry in PATH.&quot;</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">evm_group</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span>
        <span class="s2">&quot;--traces&quot;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;evm_collect_traces&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Collect traces of the execution information from the transition tool.&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">solc_group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">getgroup</span><span class="p">(</span><span class="s2">&quot;solc&quot;</span><span class="p">,</span> <span class="s2">&quot;Arguments defining the solc executable&quot;</span><span class="p">)</span>
    <span class="n">solc_group</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span>
        <span class="s2">&quot;--solc-bin&quot;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store&quot;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;solc_bin&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="p">(</span>
            <span class="s2">&quot;Path to a solc executable (for Yul source compilation). &quot;</span>
            <span class="s2">&quot;Default: First &#39;solc&#39; entry in PATH.&quot;</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="n">test_group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">getgroup</span><span class="p">(</span><span class="s2">&quot;tests&quot;</span><span class="p">,</span> <span class="s2">&quot;Arguments defining filler location and output&quot;</span><span class="p">)</span>
    <span class="n">test_group</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span>
        <span class="s2">&quot;--filler-path&quot;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store&quot;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;filler_path&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;./tests/&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Path to filler directives&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">test_group</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span>
        <span class="s2">&quot;--output&quot;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store&quot;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;output&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;./fixtures/&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Directory to store the generated test fixtures. Can be deleted.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">test_group</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span>
        <span class="s2">&quot;--flat-output&quot;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;flat_output&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Output each test case in the directory without the folder structure.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">test_group</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span>
        <span class="s2">&quot;--disable-hive&quot;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;disable_hive&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Output tests skipping hive-related properties.&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">debug_group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">getgroup</span><span class="p">(</span><span class="s2">&quot;debug&quot;</span><span class="p">,</span> <span class="s2">&quot;Arguments defining debug behavior&quot;</span><span class="p">)</span>
    <span class="n">debug_group</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span>
        <span class="s2">&quot;--t8n-dump-dir&quot;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store&quot;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;t8n_dump_dir&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Path to dump the transition tool debug output.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-class">



<h2 id="pytest_plugins.test_filler.test_filler.StateTest" class="doc doc-heading">
        <code>StateTest</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#pytest_plugins.test_filler.test_filler.StateTest" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ethereum_test_tools.spec.base_test.BaseTest" href="../../ethereum_test_tools/#ethereum_test_tools.BaseTest">BaseTest</a></code></p>

  
      <p>Filler type that tests transactions over the period of a single block.</p>


        <details class="quote">
          <summary>Source code in <code>src/ethereum_test_tools/spec/state_test.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">StateTest</span><span class="p">(</span><span class="n">BaseTest</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Filler type that tests transactions over the period of a single block.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">env</span><span class="p">:</span> <span class="n">Environment</span>
    <span class="n">pre</span><span class="p">:</span> <span class="n">Mapping</span>
    <span class="n">post</span><span class="p">:</span> <span class="n">Mapping</span>
    <span class="n">txs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Transaction</span><span class="p">]</span>
    <span class="n">engine_api_error_code</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">EngineAPIError</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">pytest_parameter_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the parameter name used to identify this filler in a test.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;state_test&quot;</span>

    <span class="k">def</span> <span class="nf">make_genesis</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">t8n</span><span class="p">:</span> <span class="n">TransitionTool</span><span class="p">,</span>
        <span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Alloc</span><span class="p">,</span> <span class="n">Bytes</span><span class="p">,</span> <span class="n">FixtureHeader</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a genesis block from the state test definition.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># The genesis environment is similar to the block 1 environment specified by the test</span>
        <span class="c1"># with some slight differences, so make a copy here</span>
        <span class="n">genesis_env</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">)</span>

        <span class="c1"># Modify values to the proper values for the genesis block</span>
        <span class="n">genesis_env</span><span class="o">.</span><span class="n">withdrawals</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">genesis_env</span><span class="o">.</span><span class="n">beacon_root</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">genesis_env</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">Number</span><span class="p">(</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">number</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="n">genesis_env</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;=</span> <span class="mi">0</span>
        <span class="p">),</span> <span class="s2">&quot;genesis block number cannot be negative, set state test env.number to 1&quot;</span>

        <span class="c1"># Set the fork requirements to the genesis environment in-place</span>
        <span class="n">genesis_env</span><span class="o">.</span><span class="n">set_fork_requirements</span><span class="p">(</span><span class="n">fork</span><span class="p">,</span> <span class="n">in_place</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">pre_alloc</span> <span class="o">=</span> <span class="n">Alloc</span><span class="p">(</span>
            <span class="n">fork</span><span class="o">.</span><span class="n">pre_allocation</span><span class="p">(</span>
                <span class="n">block_number</span><span class="o">=</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">number</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="n">Number</span><span class="p">(</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="n">new_alloc</span><span class="p">,</span> <span class="n">state_root</span> <span class="o">=</span> <span class="n">t8n</span><span class="o">.</span><span class="n">calc_state_root</span><span class="p">(</span>
            <span class="n">alloc</span><span class="o">=</span><span class="n">to_json</span><span class="p">(</span><span class="n">Alloc</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pre_alloc</span><span class="p">,</span> <span class="n">Alloc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pre</span><span class="p">))),</span>
            <span class="n">fork</span><span class="o">=</span><span class="n">fork</span><span class="p">,</span>
            <span class="n">debug_output_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_next_transition_tool_output_path</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="n">genesis</span> <span class="o">=</span> <span class="n">FixtureHeader</span><span class="p">(</span>
            <span class="n">parent_hash</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">ommers_hash</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="n">EmptyOmmersRoot</span><span class="p">),</span>
            <span class="n">coinbase</span><span class="o">=</span><span class="n">Address</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">state_root</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="n">state_root</span><span class="p">),</span>
            <span class="n">transactions_root</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="n">EmptyTrieRoot</span><span class="p">),</span>
            <span class="n">receipt_root</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="n">EmptyTrieRoot</span><span class="p">),</span>
            <span class="n">bloom</span><span class="o">=</span><span class="n">Bloom</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">difficulty</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="p">(</span>
                <span class="mh">0x20000</span> <span class="k">if</span> <span class="n">genesis_env</span><span class="o">.</span><span class="n">difficulty</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">genesis_env</span><span class="o">.</span><span class="n">difficulty</span>
            <span class="p">),</span>
            <span class="n">number</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="p">(</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">number</span><span class="p">),</span>
            <span class="n">gas_limit</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="p">(</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">gas_limit</span><span class="p">),</span>
            <span class="n">gas_used</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">timestamp</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">extra_data</span><span class="o">=</span><span class="n">Bytes</span><span class="p">([</span><span class="mi">0</span><span class="p">]),</span>
            <span class="n">mix_digest</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">nonce</span><span class="o">=</span><span class="n">HeaderNonce</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">base_fee</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">base_fee</span><span class="p">),</span>
            <span class="n">blob_gas_used</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">blob_gas_used</span><span class="p">),</span>
            <span class="n">excess_blob_gas</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">excess_blob_gas</span><span class="p">),</span>
            <span class="n">withdrawals_root</span><span class="o">=</span><span class="n">Hash</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span>
                <span class="n">EmptyTrieRoot</span> <span class="k">if</span> <span class="n">genesis_env</span><span class="o">.</span><span class="n">withdrawals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="p">),</span>
            <span class="n">beacon_root</span><span class="o">=</span><span class="n">Hash</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">beacon_root</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">genesis_rlp</span><span class="p">,</span> <span class="n">genesis</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="n">genesis</span><span class="o">.</span><span class="n">build</span><span class="p">(</span>
            <span class="n">txs</span><span class="o">=</span><span class="p">[],</span>
            <span class="n">ommers</span><span class="o">=</span><span class="p">[],</span>
            <span class="n">withdrawals</span><span class="o">=</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">Alloc</span><span class="p">(</span><span class="n">new_alloc</span><span class="p">),</span> <span class="n">genesis_rlp</span><span class="p">,</span> <span class="n">genesis</span>

    <span class="k">def</span> <span class="nf">make_blocks</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">t8n</span><span class="p">:</span> <span class="n">TransitionTool</span><span class="p">,</span>
        <span class="n">genesis</span><span class="p">:</span> <span class="n">FixtureHeader</span><span class="p">,</span>
        <span class="n">pre</span><span class="p">:</span> <span class="n">Alloc</span><span class="p">,</span>
        <span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">,</span>
        <span class="n">chain_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">eips</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">FixtureBlock</span><span class="p">],</span> <span class="n">Hash</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a block from the state test definition.</span>
<span class="sd">        Performs checks against the expected behavior of the test.</span>
<span class="sd">        Raises exception on invalid test behavior.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">env</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">apply_new_parent</span><span class="p">(</span><span class="n">genesis</span><span class="p">)</span>
        <span class="n">env</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">set_fork_requirements</span><span class="p">(</span><span class="n">fork</span><span class="p">)</span>

        <span class="n">txs</span> <span class="o">=</span> <span class="p">[</span><span class="n">tx</span><span class="o">.</span><span class="n">with_signature_and_sender</span><span class="p">()</span> <span class="k">for</span> <span class="n">tx</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">txs</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">txs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[]</span>

        <span class="n">alloc</span><span class="p">,</span> <span class="n">result</span> <span class="o">=</span> <span class="n">t8n</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span>
            <span class="n">alloc</span><span class="o">=</span><span class="n">to_json</span><span class="p">(</span><span class="n">pre</span><span class="p">),</span>
            <span class="n">txs</span><span class="o">=</span><span class="n">to_json</span><span class="p">(</span><span class="n">txs</span><span class="p">),</span>
            <span class="n">env</span><span class="o">=</span><span class="n">to_json</span><span class="p">(</span><span class="n">env</span><span class="p">),</span>
            <span class="n">fork_name</span><span class="o">=</span><span class="n">fork</span><span class="o">.</span><span class="n">fork</span><span class="p">(</span><span class="n">block_number</span><span class="o">=</span><span class="n">Number</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">number</span><span class="p">),</span> <span class="n">timestamp</span><span class="o">=</span><span class="n">Number</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)),</span>
            <span class="n">chain_id</span><span class="o">=</span><span class="n">chain_id</span><span class="p">,</span>
            <span class="n">reward</span><span class="o">=</span><span class="n">fork</span><span class="o">.</span><span class="n">get_reward</span><span class="p">(</span><span class="n">Number</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">number</span><span class="p">),</span> <span class="n">Number</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)),</span>
            <span class="n">eips</span><span class="o">=</span><span class="n">eips</span><span class="p">,</span>
            <span class="n">debug_output_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_next_transition_tool_output_path</span><span class="p">(),</span>
        <span class="p">)</span>

        <span class="n">rejected_txs</span> <span class="o">=</span> <span class="n">verify_transactions</span><span class="p">(</span><span class="n">txs</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rejected_txs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;one or more transactions in `StateTest` are &quot;</span>
                <span class="o">+</span> <span class="s2">&quot;intrinsically invalid, which are not allowed. &quot;</span>
                <span class="o">+</span> <span class="s2">&quot;Use `BlockchainTest` to verify rejection of blocks &quot;</span>
                <span class="o">+</span> <span class="s2">&quot;that include invalid transactions.&quot;</span>
            <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">verify_post_alloc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">post</span><span class="p">,</span> <span class="n">alloc</span><span class="p">)</span>
            <span class="n">verify_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">env</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">print_traces</span><span class="p">(</span><span class="n">traces</span><span class="o">=</span><span class="n">t8n</span><span class="o">.</span><span class="n">get_traces</span><span class="p">())</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="n">env</span><span class="o">.</span><span class="n">extra_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x00</span><span class="s2">&quot;</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">FixtureHeader</span><span class="o">.</span><span class="n">collect</span><span class="p">(</span>
            <span class="n">fork</span><span class="o">=</span><span class="n">fork</span><span class="p">,</span>
            <span class="n">transition_tool_result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
            <span class="n">environment</span><span class="o">=</span><span class="n">env</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">block</span><span class="p">,</span> <span class="n">header</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">build</span><span class="p">(</span>
            <span class="n">txs</span><span class="o">=</span><span class="n">txs</span><span class="p">,</span>
            <span class="n">ommers</span><span class="o">=</span><span class="p">[],</span>
            <span class="n">withdrawals</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">new_payload</span><span class="p">:</span> <span class="n">FixtureEngineNewPayload</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_test_config</span><span class="o">.</span><span class="n">disable_hive</span><span class="p">:</span>
            <span class="n">new_payload</span> <span class="o">=</span> <span class="n">FixtureEngineNewPayload</span><span class="o">.</span><span class="n">from_fixture_header</span><span class="p">(</span>
                <span class="n">fork</span><span class="o">=</span><span class="n">fork</span><span class="p">,</span>
                <span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">,</span>
                <span class="n">transactions</span><span class="o">=</span><span class="n">txs</span><span class="p">,</span>
                <span class="n">withdrawals</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">,</span>
                <span class="n">error_code</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">engine_api_error_code</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="p">[</span>
                <span class="n">FixtureBlock</span><span class="p">(</span>
                    <span class="n">rlp</span><span class="o">=</span><span class="n">block</span><span class="p">,</span>
                    <span class="n">new_payload</span><span class="o">=</span><span class="n">new_payload</span><span class="p">,</span>
                    <span class="n">block_header</span><span class="o">=</span><span class="n">header</span><span class="p">,</span>
                    <span class="n">txs</span><span class="o">=</span><span class="n">txs</span><span class="p">,</span>
                    <span class="n">ommers</span><span class="o">=</span><span class="p">[],</span>
                    <span class="n">withdrawals</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">],</span>
            <span class="n">header</span><span class="o">.</span><span class="n">hash</span><span class="p">,</span>
            <span class="n">alloc</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-function">



<h3 id="ethereum_test_tools.spec.state_test.StateTest.pytest_parameter_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pytest_parameter_name</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#ethereum_test_tools.spec.state_test.StateTest.pytest_parameter_name" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns the parameter name used to identify this filler in a test.</p>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/spec/state_test.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">pytest_parameter_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the parameter name used to identify this filler in a test.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;state_test&quot;</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="ethereum_test_tools.spec.state_test.StateTest.make_genesis" class="doc doc-heading">
<code class="highlight language-python"><span class="n">make_genesis</span><span class="p">(</span><span class="n">t8n</span><span class="p">,</span> <span class="n">fork</span><span class="p">)</span></code>

<a href="#ethereum_test_tools.spec.state_test.StateTest.make_genesis" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Create a genesis block from the state test definition.</p>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/spec/state_test.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">make_genesis</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">t8n</span><span class="p">:</span> <span class="n">TransitionTool</span><span class="p">,</span>
    <span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Alloc</span><span class="p">,</span> <span class="n">Bytes</span><span class="p">,</span> <span class="n">FixtureHeader</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a genesis block from the state test definition.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># The genesis environment is similar to the block 1 environment specified by the test</span>
    <span class="c1"># with some slight differences, so make a copy here</span>
    <span class="n">genesis_env</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">)</span>

    <span class="c1"># Modify values to the proper values for the genesis block</span>
    <span class="n">genesis_env</span><span class="o">.</span><span class="n">withdrawals</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">genesis_env</span><span class="o">.</span><span class="n">beacon_root</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">genesis_env</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">Number</span><span class="p">(</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">number</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="n">genesis_env</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;=</span> <span class="mi">0</span>
    <span class="p">),</span> <span class="s2">&quot;genesis block number cannot be negative, set state test env.number to 1&quot;</span>

    <span class="c1"># Set the fork requirements to the genesis environment in-place</span>
    <span class="n">genesis_env</span><span class="o">.</span><span class="n">set_fork_requirements</span><span class="p">(</span><span class="n">fork</span><span class="p">,</span> <span class="n">in_place</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">pre_alloc</span> <span class="o">=</span> <span class="n">Alloc</span><span class="p">(</span>
        <span class="n">fork</span><span class="o">.</span><span class="n">pre_allocation</span><span class="p">(</span>
            <span class="n">block_number</span><span class="o">=</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">number</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="n">Number</span><span class="p">(</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="n">new_alloc</span><span class="p">,</span> <span class="n">state_root</span> <span class="o">=</span> <span class="n">t8n</span><span class="o">.</span><span class="n">calc_state_root</span><span class="p">(</span>
        <span class="n">alloc</span><span class="o">=</span><span class="n">to_json</span><span class="p">(</span><span class="n">Alloc</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pre_alloc</span><span class="p">,</span> <span class="n">Alloc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pre</span><span class="p">))),</span>
        <span class="n">fork</span><span class="o">=</span><span class="n">fork</span><span class="p">,</span>
        <span class="n">debug_output_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_next_transition_tool_output_path</span><span class="p">(),</span>
    <span class="p">)</span>
    <span class="n">genesis</span> <span class="o">=</span> <span class="n">FixtureHeader</span><span class="p">(</span>
        <span class="n">parent_hash</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">ommers_hash</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="n">EmptyOmmersRoot</span><span class="p">),</span>
        <span class="n">coinbase</span><span class="o">=</span><span class="n">Address</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">state_root</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="n">state_root</span><span class="p">),</span>
        <span class="n">transactions_root</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="n">EmptyTrieRoot</span><span class="p">),</span>
        <span class="n">receipt_root</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="n">EmptyTrieRoot</span><span class="p">),</span>
        <span class="n">bloom</span><span class="o">=</span><span class="n">Bloom</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">difficulty</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="p">(</span>
            <span class="mh">0x20000</span> <span class="k">if</span> <span class="n">genesis_env</span><span class="o">.</span><span class="n">difficulty</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">genesis_env</span><span class="o">.</span><span class="n">difficulty</span>
        <span class="p">),</span>
        <span class="n">number</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="p">(</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">number</span><span class="p">),</span>
        <span class="n">gas_limit</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="p">(</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">gas_limit</span><span class="p">),</span>
        <span class="n">gas_used</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">timestamp</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">extra_data</span><span class="o">=</span><span class="n">Bytes</span><span class="p">([</span><span class="mi">0</span><span class="p">]),</span>
        <span class="n">mix_digest</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">nonce</span><span class="o">=</span><span class="n">HeaderNonce</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">base_fee</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">base_fee</span><span class="p">),</span>
        <span class="n">blob_gas_used</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">blob_gas_used</span><span class="p">),</span>
        <span class="n">excess_blob_gas</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">excess_blob_gas</span><span class="p">),</span>
        <span class="n">withdrawals_root</span><span class="o">=</span><span class="n">Hash</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span>
            <span class="n">EmptyTrieRoot</span> <span class="k">if</span> <span class="n">genesis_env</span><span class="o">.</span><span class="n">withdrawals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">),</span>
        <span class="n">beacon_root</span><span class="o">=</span><span class="n">Hash</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">beacon_root</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">genesis_rlp</span><span class="p">,</span> <span class="n">genesis</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="n">genesis</span><span class="o">.</span><span class="n">build</span><span class="p">(</span>
        <span class="n">txs</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">ommers</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">withdrawals</span><span class="o">=</span><span class="n">genesis_env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">Alloc</span><span class="p">(</span><span class="n">new_alloc</span><span class="p">),</span> <span class="n">genesis_rlp</span><span class="p">,</span> <span class="n">genesis</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="ethereum_test_tools.spec.state_test.StateTest.make_blocks" class="doc doc-heading">
<code class="highlight language-python"><span class="n">make_blocks</span><span class="p">(</span><span class="n">t8n</span><span class="p">,</span> <span class="n">genesis</span><span class="p">,</span> <span class="n">pre</span><span class="p">,</span> <span class="n">fork</span><span class="p">,</span> <span class="n">chain_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">eips</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#ethereum_test_tools.spec.state_test.StateTest.make_blocks" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Create a block from the state test definition.
Performs checks against the expected behavior of the test.
Raises exception on invalid test behavior.</p>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/spec/state_test.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">make_blocks</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">t8n</span><span class="p">:</span> <span class="n">TransitionTool</span><span class="p">,</span>
    <span class="n">genesis</span><span class="p">:</span> <span class="n">FixtureHeader</span><span class="p">,</span>
    <span class="n">pre</span><span class="p">:</span> <span class="n">Alloc</span><span class="p">,</span>
    <span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">,</span>
    <span class="n">chain_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">eips</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">FixtureBlock</span><span class="p">],</span> <span class="n">Hash</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a block from the state test definition.</span>
<span class="sd">    Performs checks against the expected behavior of the test.</span>
<span class="sd">    Raises exception on invalid test behavior.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">env</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">apply_new_parent</span><span class="p">(</span><span class="n">genesis</span><span class="p">)</span>
    <span class="n">env</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">set_fork_requirements</span><span class="p">(</span><span class="n">fork</span><span class="p">)</span>

    <span class="n">txs</span> <span class="o">=</span> <span class="p">[</span><span class="n">tx</span><span class="o">.</span><span class="n">with_signature_and_sender</span><span class="p">()</span> <span class="k">for</span> <span class="n">tx</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">txs</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">txs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[]</span>

    <span class="n">alloc</span><span class="p">,</span> <span class="n">result</span> <span class="o">=</span> <span class="n">t8n</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span>
        <span class="n">alloc</span><span class="o">=</span><span class="n">to_json</span><span class="p">(</span><span class="n">pre</span><span class="p">),</span>
        <span class="n">txs</span><span class="o">=</span><span class="n">to_json</span><span class="p">(</span><span class="n">txs</span><span class="p">),</span>
        <span class="n">env</span><span class="o">=</span><span class="n">to_json</span><span class="p">(</span><span class="n">env</span><span class="p">),</span>
        <span class="n">fork_name</span><span class="o">=</span><span class="n">fork</span><span class="o">.</span><span class="n">fork</span><span class="p">(</span><span class="n">block_number</span><span class="o">=</span><span class="n">Number</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">number</span><span class="p">),</span> <span class="n">timestamp</span><span class="o">=</span><span class="n">Number</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)),</span>
        <span class="n">chain_id</span><span class="o">=</span><span class="n">chain_id</span><span class="p">,</span>
        <span class="n">reward</span><span class="o">=</span><span class="n">fork</span><span class="o">.</span><span class="n">get_reward</span><span class="p">(</span><span class="n">Number</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">number</span><span class="p">),</span> <span class="n">Number</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)),</span>
        <span class="n">eips</span><span class="o">=</span><span class="n">eips</span><span class="p">,</span>
        <span class="n">debug_output_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_next_transition_tool_output_path</span><span class="p">(),</span>
    <span class="p">)</span>

    <span class="n">rejected_txs</span> <span class="o">=</span> <span class="n">verify_transactions</span><span class="p">(</span><span class="n">txs</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rejected_txs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="s2">&quot;one or more transactions in `StateTest` are &quot;</span>
            <span class="o">+</span> <span class="s2">&quot;intrinsically invalid, which are not allowed. &quot;</span>
            <span class="o">+</span> <span class="s2">&quot;Use `BlockchainTest` to verify rejection of blocks &quot;</span>
            <span class="o">+</span> <span class="s2">&quot;that include invalid transactions.&quot;</span>
        <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">verify_post_alloc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">post</span><span class="p">,</span> <span class="n">alloc</span><span class="p">)</span>
        <span class="n">verify_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">env</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">print_traces</span><span class="p">(</span><span class="n">traces</span><span class="o">=</span><span class="n">t8n</span><span class="o">.</span><span class="n">get_traces</span><span class="p">())</span>
        <span class="k">raise</span> <span class="n">e</span>

    <span class="n">env</span><span class="o">.</span><span class="n">extra_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x00</span><span class="s2">&quot;</span>
    <span class="n">header</span> <span class="o">=</span> <span class="n">FixtureHeader</span><span class="o">.</span><span class="n">collect</span><span class="p">(</span>
        <span class="n">fork</span><span class="o">=</span><span class="n">fork</span><span class="p">,</span>
        <span class="n">transition_tool_result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
        <span class="n">environment</span><span class="o">=</span><span class="n">env</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">block</span><span class="p">,</span> <span class="n">header</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">build</span><span class="p">(</span>
        <span class="n">txs</span><span class="o">=</span><span class="n">txs</span><span class="p">,</span>
        <span class="n">ommers</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">withdrawals</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">new_payload</span><span class="p">:</span> <span class="n">FixtureEngineNewPayload</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_test_config</span><span class="o">.</span><span class="n">disable_hive</span><span class="p">:</span>
        <span class="n">new_payload</span> <span class="o">=</span> <span class="n">FixtureEngineNewPayload</span><span class="o">.</span><span class="n">from_fixture_header</span><span class="p">(</span>
            <span class="n">fork</span><span class="o">=</span><span class="n">fork</span><span class="p">,</span>
            <span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">,</span>
            <span class="n">transactions</span><span class="o">=</span><span class="n">txs</span><span class="p">,</span>
            <span class="n">withdrawals</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">,</span>
            <span class="n">error_code</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">engine_api_error_code</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="p">[</span>
            <span class="n">FixtureBlock</span><span class="p">(</span>
                <span class="n">rlp</span><span class="o">=</span><span class="n">block</span><span class="p">,</span>
                <span class="n">new_payload</span><span class="o">=</span><span class="n">new_payload</span><span class="p">,</span>
                <span class="n">block_header</span><span class="o">=</span><span class="n">header</span><span class="p">,</span>
                <span class="n">txs</span><span class="o">=</span><span class="n">txs</span><span class="p">,</span>
                <span class="n">ommers</span><span class="o">=</span><span class="p">[],</span>
                <span class="n">withdrawals</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">],</span>
        <span class="n">header</span><span class="o">.</span><span class="n">hash</span><span class="p">,</span>
        <span class="n">alloc</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-class">



<h2 id="pytest_plugins.test_filler.test_filler.BlockchainTest" class="doc doc-heading">
        <code>BlockchainTest</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#pytest_plugins.test_filler.test_filler.BlockchainTest" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="ethereum_test_tools.spec.base_test.BaseTest" href="../../ethereum_test_tools/#ethereum_test_tools.BaseTest">BaseTest</a></code></p>

  
      <p>Filler type that tests multiple blocks (valid or invalid) in a chain.</p>


        <details class="quote">
          <summary>Source code in <code>src/ethereum_test_tools/spec/blockchain_test.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">BlockchainTest</span><span class="p">(</span><span class="n">BaseTest</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Filler type that tests multiple blocks (valid or invalid) in a chain.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">pre</span><span class="p">:</span> <span class="n">Mapping</span>
    <span class="n">post</span><span class="p">:</span> <span class="n">Mapping</span>
    <span class="n">blocks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Block</span><span class="p">]</span>
    <span class="n">genesis_environment</span><span class="p">:</span> <span class="n">Environment</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">Environment</span><span class="p">)</span>
    <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">pytest_parameter_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the parameter name used to identify this filler in a test.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;blockchain_test&quot;</span>

    <span class="k">def</span> <span class="nf">make_genesis</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">t8n</span><span class="p">:</span> <span class="n">TransitionTool</span><span class="p">,</span>
        <span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Alloc</span><span class="p">,</span> <span class="n">Bytes</span><span class="p">,</span> <span class="n">FixtureHeader</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a genesis block from the state test definition.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">env</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">genesis_environment</span><span class="o">.</span><span class="n">set_fork_requirements</span><span class="p">(</span><span class="n">fork</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;withdrawals must be empty at genesis&quot;</span>
        <span class="k">if</span> <span class="n">env</span><span class="o">.</span><span class="n">beacon_root</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">Hash</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">beacon_root</span><span class="p">)</span> <span class="o">==</span> <span class="n">Hash</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;beacon_root must be empty at genesis&quot;</span>

        <span class="n">pre_alloc</span> <span class="o">=</span> <span class="n">Alloc</span><span class="p">(</span><span class="n">fork</span><span class="o">.</span><span class="n">pre_allocation</span><span class="p">(</span><span class="n">block_number</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="n">Number</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)))</span>
        <span class="n">new_alloc</span><span class="p">,</span> <span class="n">state_root</span> <span class="o">=</span> <span class="n">t8n</span><span class="o">.</span><span class="n">calc_state_root</span><span class="p">(</span>
            <span class="n">alloc</span><span class="o">=</span><span class="n">to_json</span><span class="p">(</span><span class="n">Alloc</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pre_alloc</span><span class="p">,</span> <span class="n">Alloc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pre</span><span class="p">))),</span>
            <span class="n">fork</span><span class="o">=</span><span class="n">fork</span><span class="p">,</span>
            <span class="n">debug_output_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_next_transition_tool_output_path</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="n">genesis</span> <span class="o">=</span> <span class="n">FixtureHeader</span><span class="p">(</span>
            <span class="n">parent_hash</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">ommers_hash</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="n">EmptyOmmersRoot</span><span class="p">),</span>
            <span class="n">coinbase</span><span class="o">=</span><span class="n">Address</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">state_root</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="n">state_root</span><span class="p">),</span>
            <span class="n">transactions_root</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="n">EmptyTrieRoot</span><span class="p">),</span>
            <span class="n">receipt_root</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="n">EmptyTrieRoot</span><span class="p">),</span>
            <span class="n">bloom</span><span class="o">=</span><span class="n">Bloom</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">difficulty</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="p">(</span><span class="mh">0x20000</span> <span class="k">if</span> <span class="n">env</span><span class="o">.</span><span class="n">difficulty</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">env</span><span class="o">.</span><span class="n">difficulty</span><span class="p">),</span>
            <span class="n">number</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">gas_limit</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">gas_limit</span><span class="p">),</span>
            <span class="n">gas_used</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">timestamp</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">extra_data</span><span class="o">=</span><span class="n">Bytes</span><span class="p">([</span><span class="mi">0</span><span class="p">]),</span>
            <span class="n">mix_digest</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">nonce</span><span class="o">=</span><span class="n">HeaderNonce</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">base_fee</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">base_fee</span><span class="p">),</span>
            <span class="n">blob_gas_used</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">blob_gas_used</span><span class="p">),</span>
            <span class="n">excess_blob_gas</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">excess_blob_gas</span><span class="p">),</span>
            <span class="n">withdrawals_root</span><span class="o">=</span><span class="n">Hash</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span>
                <span class="n">withdrawals_root</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">)</span> <span class="k">if</span> <span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="p">),</span>
            <span class="n">beacon_root</span><span class="o">=</span><span class="n">Hash</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">beacon_root</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">genesis_rlp</span><span class="p">,</span> <span class="n">genesis</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="n">genesis</span><span class="o">.</span><span class="n">build</span><span class="p">(</span>
            <span class="n">txs</span><span class="o">=</span><span class="p">[],</span>
            <span class="n">ommers</span><span class="o">=</span><span class="p">[],</span>
            <span class="n">withdrawals</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">Alloc</span><span class="p">(</span><span class="n">new_alloc</span><span class="p">),</span> <span class="n">genesis_rlp</span><span class="p">,</span> <span class="n">genesis</span>

    <span class="k">def</span> <span class="nf">make_block</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">t8n</span><span class="p">:</span> <span class="n">TransitionTool</span><span class="p">,</span>
        <span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">,</span>
        <span class="n">block</span><span class="p">:</span> <span class="n">Block</span><span class="p">,</span>
        <span class="n">previous_env</span><span class="p">:</span> <span class="n">Environment</span><span class="p">,</span>
        <span class="n">previous_alloc</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">previous_head</span><span class="p">:</span> <span class="n">Hash</span><span class="p">,</span>
        <span class="n">chain_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">eips</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">FixtureBlock</span><span class="p">,</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">Hash</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Produces a block based on the previous environment and allocation.</span>
<span class="sd">        If the block is an invalid block, the environment and allocation</span>
<span class="sd">        returned are the same as passed as parameters.</span>
<span class="sd">        Raises exception on invalid test behavior.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            FixtureBlock: Block to be appended to the fixture.</span>
<span class="sd">            Environment: Environment for the next block to produce.</span>
<span class="sd">                If the produced block is invalid, this is exactly the same</span>
<span class="sd">                environment as the one passed as parameter.</span>
<span class="sd">            Dict[str, Any]: Allocation for the next block to produce.</span>
<span class="sd">                If the produced block is invalid, this is exactly the same</span>
<span class="sd">                allocation as the one passed as parameter.</span>
<span class="sd">            str: Hash of the head of the chain, only updated if the produced</span>
<span class="sd">                block is not invalid.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">rlp</span> <span class="ow">and</span> <span class="n">block</span><span class="o">.</span><span class="n">exception</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;test correctness: post-state cannot be verified if the &quot;</span>
                <span class="o">+</span> <span class="s2">&quot;block&#39;s rlp is supplied and the block is not supposed &quot;</span>
                <span class="o">+</span> <span class="s2">&quot;to produce an exception&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">rlp</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># This is the most common case, the RLP needs to be constructed</span>
            <span class="c1"># based on the transactions to be included in the block.</span>
            <span class="c1"># Set the environment according to the block to execute.</span>
            <span class="n">env</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">set_environment</span><span class="p">(</span><span class="n">previous_env</span><span class="p">)</span>
            <span class="n">env</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">set_fork_requirements</span><span class="p">(</span><span class="n">fork</span><span class="p">)</span>

            <span class="n">txs</span> <span class="o">=</span> <span class="p">(</span>
                <span class="p">[</span><span class="n">tx</span><span class="o">.</span><span class="n">with_signature_and_sender</span><span class="p">()</span> <span class="k">for</span> <span class="n">tx</span> <span class="ow">in</span> <span class="n">block</span><span class="o">.</span><span class="n">txs</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">txs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="k">else</span> <span class="p">[]</span>
            <span class="p">)</span>

            <span class="n">next_alloc</span><span class="p">,</span> <span class="n">result</span> <span class="o">=</span> <span class="n">t8n</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span>
                <span class="n">alloc</span><span class="o">=</span><span class="n">previous_alloc</span><span class="p">,</span>
                <span class="n">txs</span><span class="o">=</span><span class="n">to_json</span><span class="p">(</span><span class="n">txs</span><span class="p">),</span>
                <span class="n">env</span><span class="o">=</span><span class="n">to_json</span><span class="p">(</span><span class="n">env</span><span class="p">),</span>
                <span class="n">fork_name</span><span class="o">=</span><span class="n">fork</span><span class="o">.</span><span class="n">fork</span><span class="p">(</span>
                    <span class="n">block_number</span><span class="o">=</span><span class="n">Number</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">number</span><span class="p">),</span> <span class="n">timestamp</span><span class="o">=</span><span class="n">Number</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>
                <span class="p">),</span>
                <span class="n">chain_id</span><span class="o">=</span><span class="n">chain_id</span><span class="p">,</span>
                <span class="n">reward</span><span class="o">=</span><span class="n">fork</span><span class="o">.</span><span class="n">get_reward</span><span class="p">(</span><span class="n">Number</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">number</span><span class="p">),</span> <span class="n">Number</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)),</span>
                <span class="n">eips</span><span class="o">=</span><span class="n">eips</span><span class="p">,</span>
                <span class="n">debug_output_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_next_transition_tool_output_path</span><span class="p">(),</span>
            <span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">rejected_txs</span> <span class="o">=</span> <span class="n">verify_transactions</span><span class="p">(</span><span class="n">txs</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
                <span class="n">verify_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">env</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">print_traces</span><span class="p">(</span><span class="n">t8n</span><span class="o">.</span><span class="n">get_traces</span><span class="p">())</span>
                <span class="n">pprint</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
                <span class="n">pprint</span><span class="p">(</span><span class="n">previous_alloc</span><span class="p">)</span>
                <span class="n">pprint</span><span class="p">(</span><span class="n">next_alloc</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">e</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rejected_txs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">block</span><span class="o">.</span><span class="n">exception</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">print_traces</span><span class="p">(</span><span class="n">t8n</span><span class="o">.</span><span class="n">get_traces</span><span class="p">())</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="s2">&quot;one or more transactions in `BlockchainTest` are &quot;</span>
                    <span class="o">+</span> <span class="s2">&quot;intrinsically invalid, but the block was not expected &quot;</span>
                    <span class="o">+</span> <span class="s2">&quot;to be invalid. Please verify whether the transaction &quot;</span>
                    <span class="o">+</span> <span class="s2">&quot;was indeed expected to fail and add the proper &quot;</span>
                    <span class="o">+</span> <span class="s2">&quot;`block.exception`&quot;</span>
                <span class="p">)</span>
            <span class="n">env</span><span class="o">.</span><span class="n">extra_data</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">extra_data</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">FixtureHeader</span><span class="o">.</span><span class="n">collect</span><span class="p">(</span>
                <span class="n">fork</span><span class="o">=</span><span class="n">fork</span><span class="p">,</span>
                <span class="n">transition_tool_result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
                <span class="n">environment</span><span class="o">=</span><span class="n">env</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">rlp_modifier</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Modify any parameter specified in the `rlp_modifier` after</span>
                <span class="c1"># transition tool processing.</span>
                <span class="n">header</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">rlp_modifier</span><span class="p">)</span>

            <span class="n">rlp</span><span class="p">,</span> <span class="n">header</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">build</span><span class="p">(</span>
                <span class="n">txs</span><span class="o">=</span><span class="n">txs</span><span class="p">,</span>
                <span class="n">ommers</span><span class="o">=</span><span class="p">[],</span>
                <span class="n">withdrawals</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">new_payload</span><span class="p">:</span> <span class="n">FixtureEngineNewPayload</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_test_config</span><span class="o">.</span><span class="n">disable_hive</span><span class="p">:</span>
                <span class="n">new_payload</span> <span class="o">=</span> <span class="n">FixtureEngineNewPayload</span><span class="o">.</span><span class="n">from_fixture_header</span><span class="p">(</span>
                    <span class="n">fork</span><span class="o">=</span><span class="n">fork</span><span class="p">,</span>
                    <span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">,</span>
                    <span class="n">transactions</span><span class="o">=</span><span class="n">txs</span><span class="p">,</span>
                    <span class="n">withdrawals</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">,</span>
                    <span class="n">error_code</span><span class="o">=</span><span class="n">block</span><span class="o">.</span><span class="n">engine_api_error_code</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">exception</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Return environment and allocation of the following block</span>
                <span class="k">return</span> <span class="p">(</span>
                    <span class="n">FixtureBlock</span><span class="p">(</span>
                        <span class="n">rlp</span><span class="o">=</span><span class="n">rlp</span><span class="p">,</span>
                        <span class="n">new_payload</span><span class="o">=</span><span class="n">new_payload</span><span class="p">,</span>
                        <span class="n">block_header</span><span class="o">=</span><span class="n">header</span><span class="p">,</span>
                        <span class="n">block_number</span><span class="o">=</span><span class="n">Number</span><span class="p">(</span><span class="n">header</span><span class="o">.</span><span class="n">number</span><span class="p">),</span>
                        <span class="n">txs</span><span class="o">=</span><span class="n">txs</span><span class="p">,</span>
                        <span class="n">ommers</span><span class="o">=</span><span class="p">[],</span>
                        <span class="n">withdrawals</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="n">env</span><span class="o">.</span><span class="n">apply_new_parent</span><span class="p">(</span><span class="n">header</span><span class="p">),</span>
                    <span class="n">next_alloc</span><span class="p">,</span>
                    <span class="n">header</span><span class="o">.</span><span class="n">hash</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">(</span>
                    <span class="n">FixtureBlock</span><span class="p">(</span>
                        <span class="n">rlp</span><span class="o">=</span><span class="n">rlp</span><span class="p">,</span>
                        <span class="n">new_payload</span><span class="o">=</span><span class="n">new_payload</span><span class="p">,</span>
                        <span class="n">expected_exception</span><span class="o">=</span><span class="n">block</span><span class="o">.</span><span class="n">exception</span><span class="p">,</span>
                        <span class="n">block_number</span><span class="o">=</span><span class="n">Number</span><span class="p">(</span><span class="n">header</span><span class="o">.</span><span class="n">number</span><span class="p">),</span>
                    <span class="p">),</span>
                    <span class="n">previous_env</span><span class="p">,</span>
                    <span class="n">previous_alloc</span><span class="p">,</span>
                    <span class="n">previous_head</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="n">FixtureBlock</span><span class="p">(</span>
                    <span class="n">rlp</span><span class="o">=</span><span class="n">Bytes</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">rlp</span><span class="p">),</span>
                    <span class="n">expected_exception</span><span class="o">=</span><span class="n">block</span><span class="o">.</span><span class="n">exception</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">previous_env</span><span class="p">,</span>
                <span class="n">previous_alloc</span><span class="p">,</span>
                <span class="n">previous_head</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">make_blocks</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">t8n</span><span class="p">:</span> <span class="n">TransitionTool</span><span class="p">,</span>
        <span class="n">genesis</span><span class="p">:</span> <span class="n">FixtureHeader</span><span class="p">,</span>
        <span class="n">pre</span><span class="p">:</span> <span class="n">Alloc</span><span class="p">,</span>
        <span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">,</span>
        <span class="n">chain_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">eips</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">FixtureBlock</span><span class="p">],</span> <span class="n">Hash</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a block list from the blockchain test definition.</span>
<span class="sd">        Performs checks against the expected behavior of the test.</span>
<span class="sd">        Raises exception on invalid test behavior.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">alloc</span> <span class="o">=</span> <span class="n">to_json</span><span class="p">(</span><span class="n">pre</span><span class="p">)</span>
        <span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="o">.</span><span class="n">from_parent_header</span><span class="p">(</span><span class="n">genesis</span><span class="p">)</span>
        <span class="n">blocks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">FixtureBlock</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">head</span> <span class="o">=</span> <span class="n">genesis</span><span class="o">.</span><span class="n">hash</span> <span class="k">if</span> <span class="n">genesis</span><span class="o">.</span><span class="n">hash</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">Hash</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span><span class="p">:</span>
            <span class="n">fixture_block</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">alloc</span><span class="p">,</span> <span class="n">head</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_block</span><span class="p">(</span>
                <span class="n">t8n</span><span class="o">=</span><span class="n">t8n</span><span class="p">,</span>
                <span class="n">fork</span><span class="o">=</span><span class="n">fork</span><span class="p">,</span>
                <span class="n">block</span><span class="o">=</span><span class="n">block</span><span class="p">,</span>
                <span class="n">previous_env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span>
                <span class="n">previous_alloc</span><span class="o">=</span><span class="n">alloc</span><span class="p">,</span>
                <span class="n">previous_head</span><span class="o">=</span><span class="n">head</span><span class="p">,</span>
                <span class="n">chain_id</span><span class="o">=</span><span class="n">chain_id</span><span class="p">,</span>
                <span class="n">eips</span><span class="o">=</span><span class="n">eips</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">blocks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fixture_block</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">verify_post_alloc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">post</span><span class="p">,</span> <span class="n">alloc</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">print_traces</span><span class="p">(</span><span class="n">t8n</span><span class="o">.</span><span class="n">get_traces</span><span class="p">())</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">blocks</span><span class="p">,</span> <span class="n">head</span><span class="p">,</span> <span class="n">alloc</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-function">



<h3 id="ethereum_test_tools.spec.blockchain_test.BlockchainTest.pytest_parameter_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pytest_parameter_name</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#ethereum_test_tools.spec.blockchain_test.BlockchainTest.pytest_parameter_name" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns the parameter name used to identify this filler in a test.</p>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/spec/blockchain_test.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">pytest_parameter_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the parameter name used to identify this filler in a test.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;blockchain_test&quot;</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="ethereum_test_tools.spec.blockchain_test.BlockchainTest.make_genesis" class="doc doc-heading">
<code class="highlight language-python"><span class="n">make_genesis</span><span class="p">(</span><span class="n">t8n</span><span class="p">,</span> <span class="n">fork</span><span class="p">)</span></code>

<a href="#ethereum_test_tools.spec.blockchain_test.BlockchainTest.make_genesis" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Create a genesis block from the state test definition.</p>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/spec/blockchain_test.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">make_genesis</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">t8n</span><span class="p">:</span> <span class="n">TransitionTool</span><span class="p">,</span>
    <span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Alloc</span><span class="p">,</span> <span class="n">Bytes</span><span class="p">,</span> <span class="n">FixtureHeader</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a genesis block from the state test definition.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">env</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">genesis_environment</span><span class="o">.</span><span class="n">set_fork_requirements</span><span class="p">(</span><span class="n">fork</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;withdrawals must be empty at genesis&quot;</span>
    <span class="k">if</span> <span class="n">env</span><span class="o">.</span><span class="n">beacon_root</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">Hash</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">beacon_root</span><span class="p">)</span> <span class="o">==</span> <span class="n">Hash</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;beacon_root must be empty at genesis&quot;</span>

    <span class="n">pre_alloc</span> <span class="o">=</span> <span class="n">Alloc</span><span class="p">(</span><span class="n">fork</span><span class="o">.</span><span class="n">pre_allocation</span><span class="p">(</span><span class="n">block_number</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="n">Number</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)))</span>
    <span class="n">new_alloc</span><span class="p">,</span> <span class="n">state_root</span> <span class="o">=</span> <span class="n">t8n</span><span class="o">.</span><span class="n">calc_state_root</span><span class="p">(</span>
        <span class="n">alloc</span><span class="o">=</span><span class="n">to_json</span><span class="p">(</span><span class="n">Alloc</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pre_alloc</span><span class="p">,</span> <span class="n">Alloc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pre</span><span class="p">))),</span>
        <span class="n">fork</span><span class="o">=</span><span class="n">fork</span><span class="p">,</span>
        <span class="n">debug_output_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_next_transition_tool_output_path</span><span class="p">(),</span>
    <span class="p">)</span>
    <span class="n">genesis</span> <span class="o">=</span> <span class="n">FixtureHeader</span><span class="p">(</span>
        <span class="n">parent_hash</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">ommers_hash</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="n">EmptyOmmersRoot</span><span class="p">),</span>
        <span class="n">coinbase</span><span class="o">=</span><span class="n">Address</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">state_root</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="n">state_root</span><span class="p">),</span>
        <span class="n">transactions_root</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="n">EmptyTrieRoot</span><span class="p">),</span>
        <span class="n">receipt_root</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="n">EmptyTrieRoot</span><span class="p">),</span>
        <span class="n">bloom</span><span class="o">=</span><span class="n">Bloom</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">difficulty</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="p">(</span><span class="mh">0x20000</span> <span class="k">if</span> <span class="n">env</span><span class="o">.</span><span class="n">difficulty</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">env</span><span class="o">.</span><span class="n">difficulty</span><span class="p">),</span>
        <span class="n">number</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">gas_limit</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">gas_limit</span><span class="p">),</span>
        <span class="n">gas_used</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">timestamp</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">extra_data</span><span class="o">=</span><span class="n">Bytes</span><span class="p">([</span><span class="mi">0</span><span class="p">]),</span>
        <span class="n">mix_digest</span><span class="o">=</span><span class="n">Hash</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">nonce</span><span class="o">=</span><span class="n">HeaderNonce</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">base_fee</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">base_fee</span><span class="p">),</span>
        <span class="n">blob_gas_used</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">blob_gas_used</span><span class="p">),</span>
        <span class="n">excess_blob_gas</span><span class="o">=</span><span class="n">ZeroPaddedHexNumber</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">excess_blob_gas</span><span class="p">),</span>
        <span class="n">withdrawals_root</span><span class="o">=</span><span class="n">Hash</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span>
            <span class="n">withdrawals_root</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">)</span> <span class="k">if</span> <span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">),</span>
        <span class="n">beacon_root</span><span class="o">=</span><span class="n">Hash</span><span class="o">.</span><span class="n">or_none</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">beacon_root</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">genesis_rlp</span><span class="p">,</span> <span class="n">genesis</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="n">genesis</span><span class="o">.</span><span class="n">build</span><span class="p">(</span>
        <span class="n">txs</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">ommers</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">withdrawals</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">Alloc</span><span class="p">(</span><span class="n">new_alloc</span><span class="p">),</span> <span class="n">genesis_rlp</span><span class="p">,</span> <span class="n">genesis</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="ethereum_test_tools.spec.blockchain_test.BlockchainTest.make_block" class="doc doc-heading">
<code class="highlight language-python"><span class="n">make_block</span><span class="p">(</span><span class="n">t8n</span><span class="p">,</span> <span class="n">fork</span><span class="p">,</span> <span class="n">block</span><span class="p">,</span> <span class="n">previous_env</span><span class="p">,</span> <span class="n">previous_alloc</span><span class="p">,</span> <span class="n">previous_head</span><span class="p">,</span> <span class="n">chain_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">eips</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#ethereum_test_tools.spec.blockchain_test.BlockchainTest.make_block" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Produces a block based on the previous environment and allocation.
If the block is an invalid block, the environment and allocation
returned are the same as passed as parameters.
Raises exception on invalid test behavior.</p>
<h5 id="ethereum_test_tools.spec.blockchain_test.BlockchainTest.make_block--returns">Returns<a class="headerlink" href="#ethereum_test_tools.spec.blockchain_test.BlockchainTest.make_block--returns" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>FixtureBlock: Block to be appended to the fixture.
Environment: Environment for the next block to produce.
    If the produced block is invalid, this is exactly the same
    environment as the one passed as parameter.
Dict[str, Any]: Allocation for the next block to produce.
    If the produced block is invalid, this is exactly the same
    allocation as the one passed as parameter.
str: Hash of the head of the chain, only updated if the produced
    block is not invalid.
</code></pre></div>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/spec/blockchain_test.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">make_block</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">t8n</span><span class="p">:</span> <span class="n">TransitionTool</span><span class="p">,</span>
    <span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">,</span>
    <span class="n">block</span><span class="p">:</span> <span class="n">Block</span><span class="p">,</span>
    <span class="n">previous_env</span><span class="p">:</span> <span class="n">Environment</span><span class="p">,</span>
    <span class="n">previous_alloc</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">previous_head</span><span class="p">:</span> <span class="n">Hash</span><span class="p">,</span>
    <span class="n">chain_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">eips</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">FixtureBlock</span><span class="p">,</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">Hash</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Produces a block based on the previous environment and allocation.</span>
<span class="sd">    If the block is an invalid block, the environment and allocation</span>
<span class="sd">    returned are the same as passed as parameters.</span>
<span class="sd">    Raises exception on invalid test behavior.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">        FixtureBlock: Block to be appended to the fixture.</span>
<span class="sd">        Environment: Environment for the next block to produce.</span>
<span class="sd">            If the produced block is invalid, this is exactly the same</span>
<span class="sd">            environment as the one passed as parameter.</span>
<span class="sd">        Dict[str, Any]: Allocation for the next block to produce.</span>
<span class="sd">            If the produced block is invalid, this is exactly the same</span>
<span class="sd">            allocation as the one passed as parameter.</span>
<span class="sd">        str: Hash of the head of the chain, only updated if the produced</span>
<span class="sd">            block is not invalid.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">rlp</span> <span class="ow">and</span> <span class="n">block</span><span class="o">.</span><span class="n">exception</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="s2">&quot;test correctness: post-state cannot be verified if the &quot;</span>
            <span class="o">+</span> <span class="s2">&quot;block&#39;s rlp is supplied and the block is not supposed &quot;</span>
            <span class="o">+</span> <span class="s2">&quot;to produce an exception&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">rlp</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># This is the most common case, the RLP needs to be constructed</span>
        <span class="c1"># based on the transactions to be included in the block.</span>
        <span class="c1"># Set the environment according to the block to execute.</span>
        <span class="n">env</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">set_environment</span><span class="p">(</span><span class="n">previous_env</span><span class="p">)</span>
        <span class="n">env</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">set_fork_requirements</span><span class="p">(</span><span class="n">fork</span><span class="p">)</span>

        <span class="n">txs</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">[</span><span class="n">tx</span><span class="o">.</span><span class="n">with_signature_and_sender</span><span class="p">()</span> <span class="k">for</span> <span class="n">tx</span> <span class="ow">in</span> <span class="n">block</span><span class="o">.</span><span class="n">txs</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">txs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="p">[]</span>
        <span class="p">)</span>

        <span class="n">next_alloc</span><span class="p">,</span> <span class="n">result</span> <span class="o">=</span> <span class="n">t8n</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span>
            <span class="n">alloc</span><span class="o">=</span><span class="n">previous_alloc</span><span class="p">,</span>
            <span class="n">txs</span><span class="o">=</span><span class="n">to_json</span><span class="p">(</span><span class="n">txs</span><span class="p">),</span>
            <span class="n">env</span><span class="o">=</span><span class="n">to_json</span><span class="p">(</span><span class="n">env</span><span class="p">),</span>
            <span class="n">fork_name</span><span class="o">=</span><span class="n">fork</span><span class="o">.</span><span class="n">fork</span><span class="p">(</span>
                <span class="n">block_number</span><span class="o">=</span><span class="n">Number</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">number</span><span class="p">),</span> <span class="n">timestamp</span><span class="o">=</span><span class="n">Number</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>
            <span class="p">),</span>
            <span class="n">chain_id</span><span class="o">=</span><span class="n">chain_id</span><span class="p">,</span>
            <span class="n">reward</span><span class="o">=</span><span class="n">fork</span><span class="o">.</span><span class="n">get_reward</span><span class="p">(</span><span class="n">Number</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">number</span><span class="p">),</span> <span class="n">Number</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)),</span>
            <span class="n">eips</span><span class="o">=</span><span class="n">eips</span><span class="p">,</span>
            <span class="n">debug_output_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_next_transition_tool_output_path</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">rejected_txs</span> <span class="o">=</span> <span class="n">verify_transactions</span><span class="p">(</span><span class="n">txs</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
            <span class="n">verify_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">env</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">print_traces</span><span class="p">(</span><span class="n">t8n</span><span class="o">.</span><span class="n">get_traces</span><span class="p">())</span>
            <span class="n">pprint</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
            <span class="n">pprint</span><span class="p">(</span><span class="n">previous_alloc</span><span class="p">)</span>
            <span class="n">pprint</span><span class="p">(</span><span class="n">next_alloc</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rejected_txs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">block</span><span class="o">.</span><span class="n">exception</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">print_traces</span><span class="p">(</span><span class="n">t8n</span><span class="o">.</span><span class="n">get_traces</span><span class="p">())</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;one or more transactions in `BlockchainTest` are &quot;</span>
                <span class="o">+</span> <span class="s2">&quot;intrinsically invalid, but the block was not expected &quot;</span>
                <span class="o">+</span> <span class="s2">&quot;to be invalid. Please verify whether the transaction &quot;</span>
                <span class="o">+</span> <span class="s2">&quot;was indeed expected to fail and add the proper &quot;</span>
                <span class="o">+</span> <span class="s2">&quot;`block.exception`&quot;</span>
            <span class="p">)</span>
        <span class="n">env</span><span class="o">.</span><span class="n">extra_data</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">extra_data</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">FixtureHeader</span><span class="o">.</span><span class="n">collect</span><span class="p">(</span>
            <span class="n">fork</span><span class="o">=</span><span class="n">fork</span><span class="p">,</span>
            <span class="n">transition_tool_result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
            <span class="n">environment</span><span class="o">=</span><span class="n">env</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">rlp_modifier</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Modify any parameter specified in the `rlp_modifier` after</span>
            <span class="c1"># transition tool processing.</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">rlp_modifier</span><span class="p">)</span>

        <span class="n">rlp</span><span class="p">,</span> <span class="n">header</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">build</span><span class="p">(</span>
            <span class="n">txs</span><span class="o">=</span><span class="n">txs</span><span class="p">,</span>
            <span class="n">ommers</span><span class="o">=</span><span class="p">[],</span>
            <span class="n">withdrawals</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">new_payload</span><span class="p">:</span> <span class="n">FixtureEngineNewPayload</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_test_config</span><span class="o">.</span><span class="n">disable_hive</span><span class="p">:</span>
            <span class="n">new_payload</span> <span class="o">=</span> <span class="n">FixtureEngineNewPayload</span><span class="o">.</span><span class="n">from_fixture_header</span><span class="p">(</span>
                <span class="n">fork</span><span class="o">=</span><span class="n">fork</span><span class="p">,</span>
                <span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">,</span>
                <span class="n">transactions</span><span class="o">=</span><span class="n">txs</span><span class="p">,</span>
                <span class="n">withdrawals</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">,</span>
                <span class="n">error_code</span><span class="o">=</span><span class="n">block</span><span class="o">.</span><span class="n">engine_api_error_code</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">exception</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Return environment and allocation of the following block</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="n">FixtureBlock</span><span class="p">(</span>
                    <span class="n">rlp</span><span class="o">=</span><span class="n">rlp</span><span class="p">,</span>
                    <span class="n">new_payload</span><span class="o">=</span><span class="n">new_payload</span><span class="p">,</span>
                    <span class="n">block_header</span><span class="o">=</span><span class="n">header</span><span class="p">,</span>
                    <span class="n">block_number</span><span class="o">=</span><span class="n">Number</span><span class="p">(</span><span class="n">header</span><span class="o">.</span><span class="n">number</span><span class="p">),</span>
                    <span class="n">txs</span><span class="o">=</span><span class="n">txs</span><span class="p">,</span>
                    <span class="n">ommers</span><span class="o">=</span><span class="p">[],</span>
                    <span class="n">withdrawals</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">withdrawals</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">env</span><span class="o">.</span><span class="n">apply_new_parent</span><span class="p">(</span><span class="n">header</span><span class="p">),</span>
                <span class="n">next_alloc</span><span class="p">,</span>
                <span class="n">header</span><span class="o">.</span><span class="n">hash</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="n">FixtureBlock</span><span class="p">(</span>
                    <span class="n">rlp</span><span class="o">=</span><span class="n">rlp</span><span class="p">,</span>
                    <span class="n">new_payload</span><span class="o">=</span><span class="n">new_payload</span><span class="p">,</span>
                    <span class="n">expected_exception</span><span class="o">=</span><span class="n">block</span><span class="o">.</span><span class="n">exception</span><span class="p">,</span>
                    <span class="n">block_number</span><span class="o">=</span><span class="n">Number</span><span class="p">(</span><span class="n">header</span><span class="o">.</span><span class="n">number</span><span class="p">),</span>
                <span class="p">),</span>
                <span class="n">previous_env</span><span class="p">,</span>
                <span class="n">previous_alloc</span><span class="p">,</span>
                <span class="n">previous_head</span><span class="p">,</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">FixtureBlock</span><span class="p">(</span>
                <span class="n">rlp</span><span class="o">=</span><span class="n">Bytes</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">rlp</span><span class="p">),</span>
                <span class="n">expected_exception</span><span class="o">=</span><span class="n">block</span><span class="o">.</span><span class="n">exception</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">previous_env</span><span class="p">,</span>
            <span class="n">previous_alloc</span><span class="p">,</span>
            <span class="n">previous_head</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="ethereum_test_tools.spec.blockchain_test.BlockchainTest.make_blocks" class="doc doc-heading">
<code class="highlight language-python"><span class="n">make_blocks</span><span class="p">(</span><span class="n">t8n</span><span class="p">,</span> <span class="n">genesis</span><span class="p">,</span> <span class="n">pre</span><span class="p">,</span> <span class="n">fork</span><span class="p">,</span> <span class="n">chain_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">eips</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#ethereum_test_tools.spec.blockchain_test.BlockchainTest.make_blocks" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Create a block list from the blockchain test definition.
Performs checks against the expected behavior of the test.
Raises exception on invalid test behavior.</p>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/spec/blockchain_test.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">make_blocks</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">t8n</span><span class="p">:</span> <span class="n">TransitionTool</span><span class="p">,</span>
    <span class="n">genesis</span><span class="p">:</span> <span class="n">FixtureHeader</span><span class="p">,</span>
    <span class="n">pre</span><span class="p">:</span> <span class="n">Alloc</span><span class="p">,</span>
    <span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">,</span>
    <span class="n">chain_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">eips</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">FixtureBlock</span><span class="p">],</span> <span class="n">Hash</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a block list from the blockchain test definition.</span>
<span class="sd">    Performs checks against the expected behavior of the test.</span>
<span class="sd">    Raises exception on invalid test behavior.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">alloc</span> <span class="o">=</span> <span class="n">to_json</span><span class="p">(</span><span class="n">pre</span><span class="p">)</span>
    <span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="o">.</span><span class="n">from_parent_header</span><span class="p">(</span><span class="n">genesis</span><span class="p">)</span>
    <span class="n">blocks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">FixtureBlock</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">head</span> <span class="o">=</span> <span class="n">genesis</span><span class="o">.</span><span class="n">hash</span> <span class="k">if</span> <span class="n">genesis</span><span class="o">.</span><span class="n">hash</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">Hash</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span><span class="p">:</span>
        <span class="n">fixture_block</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">alloc</span><span class="p">,</span> <span class="n">head</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_block</span><span class="p">(</span>
            <span class="n">t8n</span><span class="o">=</span><span class="n">t8n</span><span class="p">,</span>
            <span class="n">fork</span><span class="o">=</span><span class="n">fork</span><span class="p">,</span>
            <span class="n">block</span><span class="o">=</span><span class="n">block</span><span class="p">,</span>
            <span class="n">previous_env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span>
            <span class="n">previous_alloc</span><span class="o">=</span><span class="n">alloc</span><span class="p">,</span>
            <span class="n">previous_head</span><span class="o">=</span><span class="n">head</span><span class="p">,</span>
            <span class="n">chain_id</span><span class="o">=</span><span class="n">chain_id</span><span class="p">,</span>
            <span class="n">eips</span><span class="o">=</span><span class="n">eips</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">blocks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fixture_block</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">verify_post_alloc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">post</span><span class="p">,</span> <span class="n">alloc</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">print_traces</span><span class="p">(</span><span class="n">t8n</span><span class="o">.</span><span class="n">get_traces</span><span class="p">())</span>
        <span class="k">raise</span> <span class="n">e</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">blocks</span><span class="p">,</span> <span class="n">head</span><span class="p">,</span> <span class="n">alloc</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-class">



<h2 id="pytest_plugins.test_filler.test_filler.Yul" class="doc doc-heading">
        <code>Yul</code>


<a href="#pytest_plugins.test_filler.test_filler.Yul" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="typing.SupportsBytes">SupportsBytes</span></code>, <code><span title="typing.Sized">Sized</span></code></p>

  
      <p>Yul compiler.
Compiles Yul source code into bytecode.</p>


        <details class="quote">
          <summary>Source code in <code>src/ethereum_test_tools/code/yul.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Yul</span><span class="p">(</span><span class="n">SupportsBytes</span><span class="p">,</span> <span class="n">Sized</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Yul compiler.</span>
<span class="sd">    Compiles Yul source code into bytecode.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">source</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">compiled</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">fork</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Fork</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">binary</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">source</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evm_version</span> <span class="o">=</span> <span class="n">get_evm_version_from_fork</span><span class="p">(</span><span class="n">fork</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">binary</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">which_path</span> <span class="o">=</span> <span class="n">which</span><span class="p">(</span><span class="s2">&quot;solc&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">which_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">binary</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">which_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">binary</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">Path</span><span class="p">(</span><span class="n">binary</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
<span class="w">                </span><span class="sd">&quot;&quot;&quot;`solc` binary executable not found, please refer to</span>
<span class="sd">                https://docs.soliditylang.org/en/latest/installing-solidity.html</span>
<span class="sd">                for help downloading and installing `solc`&quot;&quot;&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">binary</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">binary</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__bytes__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Assembles using `solc --assemble`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">compiled</span><span class="p">:</span>
            <span class="n">solc_args</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">evm_version</span><span class="p">:</span>
                <span class="n">solc_args</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary</span><span class="p">,</span>
                    <span class="s2">&quot;--evm-version&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">evm_version</span><span class="p">,</span>
                    <span class="o">*</span><span class="n">DEFAULT_SOLC_ARGS</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">solc_args</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">binary</span><span class="p">,</span> <span class="o">*</span><span class="n">DEFAULT_SOLC_ARGS</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">run</span><span class="p">(</span>
                <span class="n">solc_args</span><span class="p">,</span>
                <span class="nb">input</span><span class="o">=</span><span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">),</span>
                <span class="n">stdout</span><span class="o">=</span><span class="n">PIPE</span><span class="p">,</span>
                <span class="n">stderr</span><span class="o">=</span><span class="n">PIPE</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">stderr_lines</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">stderr_message</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">stderr_lines</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;failed to compile yul source:</span><span class="se">\n</span><span class="si">{</span><span class="n">stderr_message</span><span class="p">[</span><span class="mi">7</span><span class="p">:]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">lines</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">hex_str</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="n">lines</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;Binary representation:&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">compiled</span> <span class="o">=</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="n">hex_str</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compiled</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the length of the Yul bytecode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nb">bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span> <span class="o">|</span> <span class="n">SupportsBytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Code</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds two code objects together, by converting both to bytes first.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Code</span><span class="p">(</span><span class="nb">bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">+</span> <span class="n">to_bytes</span><span class="p">(</span><span class="n">other</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span> <span class="o">|</span> <span class="n">SupportsBytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Code</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds two code objects together, by converting both to bytes first.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Code</span><span class="p">(</span><span class="n">to_bytes</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">+</span> <span class="nb">bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Version</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return solc&#39;s version string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">run</span><span class="p">(</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">binary</span><span class="p">,</span> <span class="s2">&quot;--version&quot;</span><span class="p">],</span>
            <span class="n">stdout</span><span class="o">=</span><span class="n">PIPE</span><span class="p">,</span>
            <span class="n">stderr</span><span class="o">=</span><span class="n">PIPE</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">solc_output</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">version_pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;Version: (.*)&quot;</span>
        <span class="n">solc_version_string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">solc_output</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">match</span> <span class="o">:=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">version_pattern</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
                <span class="n">solc_version_string</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">solc_version_string</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;Unable to determine solc version.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Version</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Sanitize</span>
        <span class="n">solc_version_string</span> <span class="o">=</span> <span class="n">solc_version_string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;g++&quot;</span><span class="p">,</span> <span class="s2">&quot;gpp&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Version</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">solc_version_string</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-function">



<h3 id="ethereum_test_tools.code.yul.Yul.__bytes__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__bytes__</span><span class="p">()</span></code>

<a href="#ethereum_test_tools.code.yul.Yul.__bytes__" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Assembles using <code>solc --assemble</code>.</p>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/code/yul.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__bytes__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Assembles using `solc --assemble`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">compiled</span><span class="p">:</span>
        <span class="n">solc_args</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">evm_version</span><span class="p">:</span>
            <span class="n">solc_args</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary</span><span class="p">,</span>
                <span class="s2">&quot;--evm-version&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">evm_version</span><span class="p">,</span>
                <span class="o">*</span><span class="n">DEFAULT_SOLC_ARGS</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">solc_args</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">binary</span><span class="p">,</span> <span class="o">*</span><span class="n">DEFAULT_SOLC_ARGS</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">run</span><span class="p">(</span>
            <span class="n">solc_args</span><span class="p">,</span>
            <span class="nb">input</span><span class="o">=</span><span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">),</span>
            <span class="n">stdout</span><span class="o">=</span><span class="n">PIPE</span><span class="p">,</span>
            <span class="n">stderr</span><span class="o">=</span><span class="n">PIPE</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">stderr_lines</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">stderr_message</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">stderr_lines</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;failed to compile yul source:</span><span class="se">\n</span><span class="si">{</span><span class="n">stderr_message</span><span class="p">[</span><span class="mi">7</span><span class="p">:]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">lines</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">hex_str</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="n">lines</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;Binary representation:&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">compiled</span> <span class="o">=</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="n">hex_str</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compiled</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="ethereum_test_tools.code.yul.Yul.__len__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__len__</span><span class="p">()</span></code>

<a href="#ethereum_test_tools.code.yul.Yul.__len__" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Get the length of the Yul bytecode.</p>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/code/yul.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the length of the Yul bytecode.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nb">bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="ethereum_test_tools.code.yul.Yul.__add__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__add__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

<a href="#ethereum_test_tools.code.yul.Yul.__add__" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Adds two code objects together, by converting both to bytes first.</p>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/code/yul.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span> <span class="o">|</span> <span class="n">SupportsBytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Code</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds two code objects together, by converting both to bytes first.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Code</span><span class="p">(</span><span class="nb">bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">+</span> <span class="n">to_bytes</span><span class="p">(</span><span class="n">other</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="ethereum_test_tools.code.yul.Yul.__radd__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__radd__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

<a href="#ethereum_test_tools.code.yul.Yul.__radd__" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Adds two code objects together, by converting both to bytes first.</p>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/code/yul.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span> <span class="o">|</span> <span class="n">SupportsBytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Code</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds two code objects together, by converting both to bytes first.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Code</span><span class="p">(</span><span class="n">to_bytes</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">+</span> <span class="nb">bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="ethereum_test_tools.code.yul.Yul.version" class="doc doc-heading">
<code class="highlight language-python"><span class="n">version</span><span class="p">()</span></code>

<a href="#ethereum_test_tools.code.yul.Yul.version" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Return solc's version string</p>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/code/yul.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Version</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return solc&#39;s version string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">run</span><span class="p">(</span>
        <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">binary</span><span class="p">,</span> <span class="s2">&quot;--version&quot;</span><span class="p">],</span>
        <span class="n">stdout</span><span class="o">=</span><span class="n">PIPE</span><span class="p">,</span>
        <span class="n">stderr</span><span class="o">=</span><span class="n">PIPE</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">solc_output</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">version_pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;Version: (.*)&quot;</span>
    <span class="n">solc_version_string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">solc_output</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">match</span> <span class="o">:=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">version_pattern</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
            <span class="n">solc_version_string</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">break</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">solc_version_string</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;Unable to determine solc version.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Version</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="c1"># Sanitize</span>
    <span class="n">solc_version_string</span> <span class="o">=</span> <span class="n">solc_version_string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;g++&quot;</span><span class="p">,</span> <span class="s2">&quot;gpp&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Version</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">solc_version_string</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-class">



<h2 id="pytest_plugins.test_filler.test_filler.TransitionTool" class="doc doc-heading">
        <code>TransitionTool</code>


<a href="#pytest_plugins.test_filler.test_filler.TransitionTool" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">

  
      <p>Transition tool abstract base class which should be inherited by all transition tool
implementations.</p>


        <details class="quote">
          <summary>Source code in <code>src/evm_transition_tool/transition_tool.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">TransitionTool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transition tool abstract base class which should be inherited by all transition tool</span>
<span class="sd">    implementations.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">traces</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">registered_tools</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;TransitionTool&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">default_tool</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;TransitionTool&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">default_binary</span><span class="p">:</span> <span class="n">Path</span>
    <span class="n">detect_binary_pattern</span><span class="p">:</span> <span class="n">Pattern</span>
    <span class="n">version_flag</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;-v&quot;</span>
    <span class="n">t8n_subcommand</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">cached_version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Abstract methods that each tool must implement</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">binary</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">trace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Abstract initialization method that all subclasses must implement.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">binary</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">binary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_binary</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># improve behavior of which by resolving the path: ~/relative paths don&#39;t work</span>
            <span class="n">resolved_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">binary</span><span class="p">))</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">resolved_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                <span class="n">binary</span> <span class="o">=</span> <span class="n">resolved_path</span>
        <span class="n">binary</span> <span class="o">=</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="n">binary</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">binary</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TransitionToolNotFoundInPath</span><span class="p">(</span><span class="n">binary</span><span class="o">=</span><span class="n">binary</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">binary</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">binary</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trace</span> <span class="o">=</span> <span class="n">trace</span>

    <span class="k">def</span> <span class="nf">__init_subclass__</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Registers all subclasses of TransitionTool as possible tools.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">TransitionTool</span><span class="o">.</span><span class="n">register_tool</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">register_tool</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">tool_subclass</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;TransitionTool&quot;</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Registers a given subclass as tool option.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">registered_tools</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tool_subclass</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">set_default_tool</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">tool_subclass</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;TransitionTool&quot;</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Registers the default tool subclass.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">default_tool</span> <span class="o">=</span> <span class="n">tool_subclass</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_binary_path</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">binary_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;TransitionTool&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instantiates the appropriate TransitionTool subclass derived from the</span>
<span class="sd">        tool&#39;s binary path.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="bp">cls</span><span class="o">.</span><span class="n">default_tool</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;default transition tool was never set&quot;</span>

        <span class="k">if</span> <span class="n">binary_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">default_tool</span><span class="p">(</span><span class="n">binary</span><span class="o">=</span><span class="n">binary_path</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="n">resolved_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">binary_path</span><span class="p">))</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">resolved_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">binary_path</span> <span class="o">=</span> <span class="n">resolved_path</span>
        <span class="n">binary</span> <span class="o">=</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="n">binary_path</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">binary</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TransitionToolNotFoundInPath</span><span class="p">(</span><span class="n">binary</span><span class="o">=</span><span class="n">binary</span><span class="p">)</span>

        <span class="n">binary</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">binary</span><span class="p">)</span>

        <span class="c1"># Group the tools by version flag, so we only have to call the tool once for all the</span>
        <span class="c1"># classes that share the same version flag</span>
        <span class="k">for</span> <span class="n">version_flag</span><span class="p">,</span> <span class="n">subclasses</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">registered_tools</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">version_flag</span>
        <span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
                    <span class="p">[</span><span class="n">binary</span><span class="p">,</span> <span class="n">version_flag</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Non-zero return code: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">returncode</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">stderr</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tool wrote to stderr: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="n">binary_output</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="p">:</span>
                    <span class="n">binary_output</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="c1"># If the tool doesn&#39;t support the version flag,</span>
                <span class="c1"># we&#39;ll get an non-zero exit code.</span>
                <span class="k">continue</span>
            <span class="k">for</span> <span class="n">subclass</span> <span class="ow">in</span> <span class="n">subclasses</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">subclass</span><span class="o">.</span><span class="n">detect_binary</span><span class="p">(</span><span class="n">binary_output</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">subclass</span><span class="p">(</span><span class="n">binary</span><span class="o">=</span><span class="n">binary</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">raise</span> <span class="n">UnknownTransitionTool</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown transition tool binary: </span><span class="si">{</span><span class="n">binary_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">detect_binary</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">binary_output</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns True if the binary matches the tool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="bp">cls</span><span class="o">.</span><span class="n">detect_binary_pattern</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">detect_binary_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">binary_output</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return name and version of tool used to state transition</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_version</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
                <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">binary</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">version_flag</span><span class="p">],</span>
                <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;failed to evaluate: &quot;</span> <span class="o">+</span> <span class="n">result</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">cached_version</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_version</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">is_fork_supported</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns True if the fork is supported by the tool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Perform any cleanup tasks related to the tested tool.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">reset_traces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Resets the internal trace storage for a new test to begin</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traces</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">append_traces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_traces</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Appends a list of traces of a state transition to the current list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">traces</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">traces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_traces</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_traces</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]]]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the accumulated traces</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">traces</span>

    <span class="k">def</span> <span class="nf">collect_traces</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">receipts</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span>
        <span class="n">temp_dir</span><span class="p">:</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">,</span>
        <span class="n">debug_output_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Collect the traces from the t8n tool output and store them in the traces list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">traces</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">receipts</span><span class="p">):</span>
            <span class="n">h</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="s2">&quot;transactionHash&quot;</span><span class="p">]</span>
            <span class="n">trace_file_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;trace-</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">h</span><span class="si">}</span><span class="s2">.jsonl&quot;</span>
            <span class="k">if</span> <span class="n">debug_output_path</span><span class="p">:</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">temp_dir</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">trace_file_name</span><span class="p">),</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">debug_output_path</span><span class="p">,</span> <span class="n">trace_file_name</span><span class="p">),</span>
                <span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">temp_dir</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">trace_file_name</span><span class="p">),</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">trace_file</span><span class="p">:</span>
                <span class="n">tx_traces</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">trace_line</span> <span class="ow">in</span> <span class="n">trace_file</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
                    <span class="n">tx_traces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">trace_line</span><span class="p">))</span>
                <span class="n">traces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tx_traces</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append_traces</span><span class="p">(</span><span class="n">traces</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">alloc</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="n">txs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="n">env</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="n">fork_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">chain_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">reward</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">eips</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">debug_output_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Executes `evm t8n` with the specified arguments.</span>

<span class="sd">        If a client&#39;s `t8n` tool varies from the default behavior, this method</span>
<span class="sd">        should be overridden.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">eips</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fork_name</span> <span class="o">=</span> <span class="s2">&quot;+&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">fork_name</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">eip</span><span class="p">)</span> <span class="k">for</span> <span class="n">eip</span> <span class="ow">in</span> <span class="n">eips</span><span class="p">])</span>

        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">env</span><span class="p">[</span><span class="s2">&quot;currentNumber&quot;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">reward</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

        <span class="n">command</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">binary</span><span class="p">)]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">t8n_subcommand</span><span class="p">:</span>
            <span class="n">command</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t8n_subcommand</span><span class="p">)</span>

        <span class="n">args</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="p">[</span>
            <span class="s2">&quot;--input.alloc=stdin&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--input.txs=stdin&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--input.env=stdin&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--output.result=stdout&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--output.alloc=stdout&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--output.body=stdout&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;--state.fork=</span><span class="si">{</span><span class="n">fork_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;--state.chainid=</span><span class="si">{</span><span class="n">chain_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;--state.reward=</span><span class="si">{</span><span class="n">reward</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">default_binary</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;ethereum-spec-evm&quot;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="s2">&quot;`ethereum-spec-evm` tracing is not currently implemented in &quot;</span>
                    <span class="s2">&quot;execution-spec-tests, see &quot;</span>
                    <span class="s2">&quot;https://github.com/ethereum/execution-spec-tests/issues/267.&quot;</span>
                <span class="p">)</span>
            <span class="n">temp_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;--trace&quot;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;--output.basedir=</span><span class="si">{</span><span class="n">temp_dir</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">stdin</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;alloc&quot;</span><span class="p">:</span> <span class="n">alloc</span><span class="p">,</span>
            <span class="s2">&quot;txs&quot;</span><span class="p">:</span> <span class="n">txs</span><span class="p">,</span>
            <span class="s2">&quot;env&quot;</span><span class="p">:</span> <span class="n">env</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">encoded_input</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">stdin</span><span class="p">))</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="n">args</span><span class="p">,</span>
            <span class="nb">input</span><span class="o">=</span><span class="n">encoded_input</span><span class="p">,</span>
            <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
            <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">debug_output_path</span><span class="p">:</span>
            <span class="n">t8n_call</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
            <span class="n">t8n_output_base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">debug_output_path</span><span class="p">,</span> <span class="s2">&quot;t8n.sh.out&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">:</span>
                <span class="n">t8n_call</span> <span class="o">=</span> <span class="n">t8n_call</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">temp_dir</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">t8n_output_base_dir</span><span class="p">)</span>
            <span class="n">t8n_script</span> <span class="o">=</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="s2">                #!/bin/bash</span>
<span class="s2">                rm -rf </span><span class="si">{</span><span class="n">debug_output_path</span><span class="si">}</span><span class="s2">/t8n.sh.out  # hard-coded to avoid surprises</span>
<span class="s2">                mkdir </span><span class="si">{</span><span class="n">debug_output_path</span><span class="si">}</span><span class="s2">/t8n.sh.out  # unused if tracing is not enabled</span>
<span class="s2">                </span><span class="si">{</span><span class="n">t8n_call</span><span class="si">}</span><span class="s2"> &lt; </span><span class="si">{</span><span class="n">debug_output_path</span><span class="si">}</span><span class="s2">/stdin.txt</span>
<span class="s2">                &quot;&quot;&quot;</span>
            <span class="p">)</span>
            <span class="n">dump_files_to_directory</span><span class="p">(</span>
                <span class="n">debug_output_path</span><span class="p">,</span>
                <span class="p">{</span>
                    <span class="s2">&quot;args.py&quot;</span><span class="p">:</span> <span class="n">args</span><span class="p">,</span>
                    <span class="s2">&quot;input/alloc.json&quot;</span><span class="p">:</span> <span class="n">stdin</span><span class="p">[</span><span class="s2">&quot;alloc&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;input/env.json&quot;</span><span class="p">:</span> <span class="n">stdin</span><span class="p">[</span><span class="s2">&quot;env&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;input/txs.json&quot;</span><span class="p">:</span> <span class="n">stdin</span><span class="p">[</span><span class="s2">&quot;txs&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;returncode.txt&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span><span class="p">,</span>
                    <span class="s2">&quot;stdin.txt&quot;</span><span class="p">:</span> <span class="n">stdin</span><span class="p">,</span>
                    <span class="s2">&quot;stdout.txt&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">(),</span>
                    <span class="s2">&quot;stderr.txt&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">decode</span><span class="p">(),</span>
                    <span class="s2">&quot;t8n.sh+x&quot;</span><span class="p">:</span> <span class="n">t8n_script</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;failed to evaluate: &quot;</span> <span class="o">+</span> <span class="n">result</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>

        <span class="n">output</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">x</span> <span class="ow">in</span> <span class="n">output</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;alloc&quot;</span><span class="p">,</span> <span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="s2">&quot;body&quot;</span><span class="p">]]):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Malformed t8n output: missing &#39;alloc&#39;, &#39;result&#39; or &#39;body&#39;.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">debug_output_path</span><span class="p">:</span>
            <span class="n">dump_files_to_directory</span><span class="p">(</span>
                <span class="n">debug_output_path</span><span class="p">,</span>
                <span class="p">{</span>
                    <span class="s2">&quot;output/alloc.json&quot;</span><span class="p">:</span> <span class="n">output</span><span class="p">[</span><span class="s2">&quot;alloc&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;output/result.json&quot;</span><span class="p">:</span> <span class="n">output</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;output/txs.rlp&quot;</span><span class="p">:</span> <span class="n">output</span><span class="p">[</span><span class="s2">&quot;body&quot;</span><span class="p">],</span>
                <span class="p">},</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">collect_traces</span><span class="p">(</span><span class="n">output</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">][</span><span class="s2">&quot;receipts&quot;</span><span class="p">],</span> <span class="n">temp_dir</span><span class="p">,</span> <span class="n">debug_output_path</span><span class="p">)</span>
            <span class="n">temp_dir</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">output</span><span class="p">[</span><span class="s2">&quot;alloc&quot;</span><span class="p">],</span> <span class="n">output</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">calc_state_root</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">alloc</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">,</span> <span class="n">debug_output_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Dict</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the state root for the given `alloc`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">env</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;currentCoinbase&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0000000000000000000000000000000000000000&quot;</span><span class="p">,</span>
            <span class="s2">&quot;currentDifficulty&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;currentGasLimit&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;currentNumber&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;currentTimestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">fork</span><span class="o">.</span><span class="n">header_base_fee_required</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">env</span><span class="p">[</span><span class="s2">&quot;currentBaseFee&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;7&quot;</span>

        <span class="k">if</span> <span class="n">fork</span><span class="o">.</span><span class="n">header_prev_randao_required</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">env</span><span class="p">[</span><span class="s2">&quot;currentRandom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>

        <span class="k">if</span> <span class="n">fork</span><span class="o">.</span><span class="n">header_withdrawals_required</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">env</span><span class="p">[</span><span class="s2">&quot;withdrawals&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">fork</span><span class="o">.</span><span class="n">header_excess_blob_gas_required</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">env</span><span class="p">[</span><span class="s2">&quot;currentExcessBlobGas&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>

        <span class="k">if</span> <span class="n">fork</span><span class="o">.</span><span class="n">header_beacon_root_required</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">env</span><span class="p">[</span>
                <span class="s2">&quot;parentBeaconBlockRoot&quot;</span>
            <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>

        <span class="n">new_alloc</span><span class="p">,</span> <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span>
            <span class="n">alloc</span><span class="o">=</span><span class="n">alloc</span><span class="p">,</span>
            <span class="n">txs</span><span class="o">=</span><span class="p">[],</span>
            <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span>
            <span class="n">fork_name</span><span class="o">=</span><span class="n">fork</span><span class="o">.</span><span class="n">fork</span><span class="p">(</span><span class="n">block_number</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">debug_output_path</span><span class="o">=</span><span class="n">debug_output_path</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">state_root</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;stateRoot&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">state_root</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">state_root</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Unable to calculate state root&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_alloc</span><span class="p">,</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="n">state_root</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-function">



<h3 id="evm_transition_tool.transition_tool.TransitionTool.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">binary</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">trace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#evm_transition_tool.transition_tool.TransitionTool.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Abstract initialization method that all subclasses must implement.</p>

      <details class="quote">
        <summary>Source code in <code>src/evm_transition_tool/transition_tool.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">binary</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">trace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract initialization method that all subclasses must implement.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">binary</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">binary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_binary</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># improve behavior of which by resolving the path: ~/relative paths don&#39;t work</span>
        <span class="n">resolved_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">binary</span><span class="p">))</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">resolved_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">binary</span> <span class="o">=</span> <span class="n">resolved_path</span>
    <span class="n">binary</span> <span class="o">=</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="n">binary</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">binary</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TransitionToolNotFoundInPath</span><span class="p">(</span><span class="n">binary</span><span class="o">=</span><span class="n">binary</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">binary</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">binary</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">trace</span> <span class="o">=</span> <span class="n">trace</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="evm_transition_tool.transition_tool.TransitionTool.__init_subclass__" class="doc doc-heading">
<code class="highlight language-python"><span class="n">__init_subclass__</span><span class="p">()</span></code>

<a href="#evm_transition_tool.transition_tool.TransitionTool.__init_subclass__" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Registers all subclasses of TransitionTool as possible tools.</p>

      <details class="quote">
        <summary>Source code in <code>src/evm_transition_tool/transition_tool.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">__init_subclass__</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Registers all subclasses of TransitionTool as possible tools.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">TransitionTool</span><span class="o">.</span><span class="n">register_tool</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="evm_transition_tool.transition_tool.TransitionTool.register_tool" class="doc doc-heading">
<code class="highlight language-python"><span class="n">register_tool</span><span class="p">(</span><span class="n">tool_subclass</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#evm_transition_tool.transition_tool.TransitionTool.register_tool" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Registers a given subclass as tool option.</p>

      <details class="quote">
        <summary>Source code in <code>src/evm_transition_tool/transition_tool.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">register_tool</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">tool_subclass</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;TransitionTool&quot;</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Registers a given subclass as tool option.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">registered_tools</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tool_subclass</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="evm_transition_tool.transition_tool.TransitionTool.set_default_tool" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_default_tool</span><span class="p">(</span><span class="n">tool_subclass</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#evm_transition_tool.transition_tool.TransitionTool.set_default_tool" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Registers the default tool subclass.</p>

      <details class="quote">
        <summary>Source code in <code>src/evm_transition_tool/transition_tool.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">set_default_tool</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">tool_subclass</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;TransitionTool&quot;</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Registers the default tool subclass.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">default_tool</span> <span class="o">=</span> <span class="n">tool_subclass</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="evm_transition_tool.transition_tool.TransitionTool.from_binary_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_binary_path</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">binary_path</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#evm_transition_tool.transition_tool.TransitionTool.from_binary_path" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Instantiates the appropriate TransitionTool subclass derived from the
tool's binary path.</p>

      <details class="quote">
        <summary>Source code in <code>src/evm_transition_tool/transition_tool.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_binary_path</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">binary_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;TransitionTool&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instantiates the appropriate TransitionTool subclass derived from the</span>
<span class="sd">    tool&#39;s binary path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="bp">cls</span><span class="o">.</span><span class="n">default_tool</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;default transition tool was never set&quot;</span>

    <span class="k">if</span> <span class="n">binary_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">default_tool</span><span class="p">(</span><span class="n">binary</span><span class="o">=</span><span class="n">binary_path</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="n">resolved_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">binary_path</span><span class="p">))</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">resolved_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">binary_path</span> <span class="o">=</span> <span class="n">resolved_path</span>
    <span class="n">binary</span> <span class="o">=</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="n">binary_path</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">binary</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TransitionToolNotFoundInPath</span><span class="p">(</span><span class="n">binary</span><span class="o">=</span><span class="n">binary</span><span class="p">)</span>

    <span class="n">binary</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">binary</span><span class="p">)</span>

    <span class="c1"># Group the tools by version flag, so we only have to call the tool once for all the</span>
    <span class="c1"># classes that share the same version flag</span>
    <span class="k">for</span> <span class="n">version_flag</span><span class="p">,</span> <span class="n">subclasses</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">registered_tools</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">version_flag</span>
    <span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
                <span class="p">[</span><span class="n">binary</span><span class="p">,</span> <span class="n">version_flag</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Non-zero return code: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">returncode</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">stderr</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tool wrote to stderr: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">binary_output</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="p">:</span>
                <span class="n">binary_output</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="c1"># If the tool doesn&#39;t support the version flag,</span>
            <span class="c1"># we&#39;ll get an non-zero exit code.</span>
            <span class="k">continue</span>
        <span class="k">for</span> <span class="n">subclass</span> <span class="ow">in</span> <span class="n">subclasses</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">subclass</span><span class="o">.</span><span class="n">detect_binary</span><span class="p">(</span><span class="n">binary_output</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">subclass</span><span class="p">(</span><span class="n">binary</span><span class="o">=</span><span class="n">binary</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">raise</span> <span class="n">UnknownTransitionTool</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown transition tool binary: </span><span class="si">{</span><span class="n">binary_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="evm_transition_tool.transition_tool.TransitionTool.detect_binary" class="doc doc-heading">
<code class="highlight language-python"><span class="n">detect_binary</span><span class="p">(</span><span class="n">binary_output</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#evm_transition_tool.transition_tool.TransitionTool.detect_binary" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns True if the binary matches the tool</p>

      <details class="quote">
        <summary>Source code in <code>src/evm_transition_tool/transition_tool.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">detect_binary</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">binary_output</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns True if the binary matches the tool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="bp">cls</span><span class="o">.</span><span class="n">detect_binary_pattern</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">detect_binary_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">binary_output</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="evm_transition_tool.transition_tool.TransitionTool.version" class="doc doc-heading">
<code class="highlight language-python"><span class="n">version</span><span class="p">()</span></code>

<a href="#evm_transition_tool.transition_tool.TransitionTool.version" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Return name and version of tool used to state transition</p>

      <details class="quote">
        <summary>Source code in <code>src/evm_transition_tool/transition_tool.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return name and version of tool used to state transition</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_version</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">binary</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">version_flag</span><span class="p">],</span>
            <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;failed to evaluate: &quot;</span> <span class="o">+</span> <span class="n">result</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cached_version</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_version</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="evm_transition_tool.transition_tool.TransitionTool.is_fork_supported" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_fork_supported</span><span class="p">(</span><span class="n">fork</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#evm_transition_tool.transition_tool.TransitionTool.is_fork_supported" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns True if the fork is supported by the tool</p>

      <details class="quote">
        <summary>Source code in <code>src/evm_transition_tool/transition_tool.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">is_fork_supported</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns True if the fork is supported by the tool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="evm_transition_tool.transition_tool.TransitionTool.shutdown" class="doc doc-heading">
<code class="highlight language-python"><span class="n">shutdown</span><span class="p">()</span></code>

<a href="#evm_transition_tool.transition_tool.TransitionTool.shutdown" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Perform any cleanup tasks related to the tested tool.</p>

      <details class="quote">
        <summary>Source code in <code>src/evm_transition_tool/transition_tool.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Perform any cleanup tasks related to the tested tool.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="evm_transition_tool.transition_tool.TransitionTool.reset_traces" class="doc doc-heading">
<code class="highlight language-python"><span class="n">reset_traces</span><span class="p">()</span></code>

<a href="#evm_transition_tool.transition_tool.TransitionTool.reset_traces" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Resets the internal trace storage for a new test to begin</p>

      <details class="quote">
        <summary>Source code in <code>src/evm_transition_tool/transition_tool.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">reset_traces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Resets the internal trace storage for a new test to begin</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">traces</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="evm_transition_tool.transition_tool.TransitionTool.append_traces" class="doc doc-heading">
<code class="highlight language-python"><span class="n">append_traces</span><span class="p">(</span><span class="n">new_traces</span><span class="p">)</span></code>

<a href="#evm_transition_tool.transition_tool.TransitionTool.append_traces" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Appends a list of traces of a state transition to the current list</p>

      <details class="quote">
        <summary>Source code in <code>src/evm_transition_tool/transition_tool.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">append_traces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_traces</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Appends a list of traces of a state transition to the current list</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">traces</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traces</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">traces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_traces</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="evm_transition_tool.transition_tool.TransitionTool.get_traces" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_traces</span><span class="p">()</span></code>

<a href="#evm_transition_tool.transition_tool.TransitionTool.get_traces" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns the accumulated traces</p>

      <details class="quote">
        <summary>Source code in <code>src/evm_transition_tool/transition_tool.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_traces</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]]]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the accumulated traces</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">traces</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="evm_transition_tool.transition_tool.TransitionTool.collect_traces" class="doc doc-heading">
<code class="highlight language-python"><span class="n">collect_traces</span><span class="p">(</span><span class="n">receipts</span><span class="p">,</span> <span class="n">temp_dir</span><span class="p">,</span> <span class="n">debug_output_path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

<a href="#evm_transition_tool.transition_tool.TransitionTool.collect_traces" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Collect the traces from the t8n tool output and store them in the traces list.</p>

      <details class="quote">
        <summary>Source code in <code>src/evm_transition_tool/transition_tool.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">collect_traces</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">receipts</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span>
    <span class="n">temp_dir</span><span class="p">:</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">,</span>
    <span class="n">debug_output_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Collect the traces from the t8n tool output and store them in the traces list.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">traces</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">receipts</span><span class="p">):</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="s2">&quot;transactionHash&quot;</span><span class="p">]</span>
        <span class="n">trace_file_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;trace-</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">h</span><span class="si">}</span><span class="s2">.jsonl&quot;</span>
        <span class="k">if</span> <span class="n">debug_output_path</span><span class="p">:</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span>
                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">temp_dir</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">trace_file_name</span><span class="p">),</span>
                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">debug_output_path</span><span class="p">,</span> <span class="n">trace_file_name</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">temp_dir</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">trace_file_name</span><span class="p">),</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">trace_file</span><span class="p">:</span>
            <span class="n">tx_traces</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">trace_line</span> <span class="ow">in</span> <span class="n">trace_file</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
                <span class="n">tx_traces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">trace_line</span><span class="p">))</span>
            <span class="n">traces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tx_traces</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append_traces</span><span class="p">(</span><span class="n">traces</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="evm_transition_tool.transition_tool.TransitionTool.evaluate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">evaluate</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">alloc</span><span class="p">,</span> <span class="n">txs</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">fork_name</span><span class="p">,</span> <span class="n">chain_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">reward</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">eips</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug_output_path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

<a href="#evm_transition_tool.transition_tool.TransitionTool.evaluate" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Executes <code>evm t8n</code> with the specified arguments.</p>
<p>If a client's <code>t8n</code> tool varies from the default behavior, this method
should be overridden.</p>

      <details class="quote">
        <summary>Source code in <code>src/evm_transition_tool/transition_tool.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">alloc</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="n">txs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="n">env</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="n">fork_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">chain_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">reward</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">eips</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">debug_output_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes `evm t8n` with the specified arguments.</span>

<span class="sd">    If a client&#39;s `t8n` tool varies from the default behavior, this method</span>
<span class="sd">    should be overridden.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">eips</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fork_name</span> <span class="o">=</span> <span class="s2">&quot;+&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">fork_name</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">eip</span><span class="p">)</span> <span class="k">for</span> <span class="n">eip</span> <span class="ow">in</span> <span class="n">eips</span><span class="p">])</span>

    <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">env</span><span class="p">[</span><span class="s2">&quot;currentNumber&quot;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">reward</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

    <span class="n">command</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">binary</span><span class="p">)]</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">t8n_subcommand</span><span class="p">:</span>
        <span class="n">command</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t8n_subcommand</span><span class="p">)</span>

    <span class="n">args</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="p">[</span>
        <span class="s2">&quot;--input.alloc=stdin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--input.txs=stdin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--input.env=stdin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--output.result=stdout&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--output.alloc=stdout&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--output.body=stdout&quot;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;--state.fork=</span><span class="si">{</span><span class="n">fork_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;--state.chainid=</span><span class="si">{</span><span class="n">chain_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;--state.reward=</span><span class="si">{</span><span class="n">reward</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">default_binary</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;ethereum-spec-evm&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;`ethereum-spec-evm` tracing is not currently implemented in &quot;</span>
                <span class="s2">&quot;execution-spec-tests, see &quot;</span>
                <span class="s2">&quot;https://github.com/ethereum/execution-spec-tests/issues/267.&quot;</span>
            <span class="p">)</span>
        <span class="n">temp_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;--trace&quot;</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;--output.basedir=</span><span class="si">{</span><span class="n">temp_dir</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">stdin</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;alloc&quot;</span><span class="p">:</span> <span class="n">alloc</span><span class="p">,</span>
        <span class="s2">&quot;txs&quot;</span><span class="p">:</span> <span class="n">txs</span><span class="p">,</span>
        <span class="s2">&quot;env&quot;</span><span class="p">:</span> <span class="n">env</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">encoded_input</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">stdin</span><span class="p">))</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
        <span class="n">args</span><span class="p">,</span>
        <span class="nb">input</span><span class="o">=</span><span class="n">encoded_input</span><span class="p">,</span>
        <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
        <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">debug_output_path</span><span class="p">:</span>
        <span class="n">t8n_call</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="n">t8n_output_base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">debug_output_path</span><span class="p">,</span> <span class="s2">&quot;t8n.sh.out&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">:</span>
            <span class="n">t8n_call</span> <span class="o">=</span> <span class="n">t8n_call</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">temp_dir</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">t8n_output_base_dir</span><span class="p">)</span>
        <span class="n">t8n_script</span> <span class="o">=</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="s2">            #!/bin/bash</span>
<span class="s2">            rm -rf </span><span class="si">{</span><span class="n">debug_output_path</span><span class="si">}</span><span class="s2">/t8n.sh.out  # hard-coded to avoid surprises</span>
<span class="s2">            mkdir </span><span class="si">{</span><span class="n">debug_output_path</span><span class="si">}</span><span class="s2">/t8n.sh.out  # unused if tracing is not enabled</span>
<span class="s2">            </span><span class="si">{</span><span class="n">t8n_call</span><span class="si">}</span><span class="s2"> &lt; </span><span class="si">{</span><span class="n">debug_output_path</span><span class="si">}</span><span class="s2">/stdin.txt</span>
<span class="s2">            &quot;&quot;&quot;</span>
        <span class="p">)</span>
        <span class="n">dump_files_to_directory</span><span class="p">(</span>
            <span class="n">debug_output_path</span><span class="p">,</span>
            <span class="p">{</span>
                <span class="s2">&quot;args.py&quot;</span><span class="p">:</span> <span class="n">args</span><span class="p">,</span>
                <span class="s2">&quot;input/alloc.json&quot;</span><span class="p">:</span> <span class="n">stdin</span><span class="p">[</span><span class="s2">&quot;alloc&quot;</span><span class="p">],</span>
                <span class="s2">&quot;input/env.json&quot;</span><span class="p">:</span> <span class="n">stdin</span><span class="p">[</span><span class="s2">&quot;env&quot;</span><span class="p">],</span>
                <span class="s2">&quot;input/txs.json&quot;</span><span class="p">:</span> <span class="n">stdin</span><span class="p">[</span><span class="s2">&quot;txs&quot;</span><span class="p">],</span>
                <span class="s2">&quot;returncode.txt&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span><span class="p">,</span>
                <span class="s2">&quot;stdin.txt&quot;</span><span class="p">:</span> <span class="n">stdin</span><span class="p">,</span>
                <span class="s2">&quot;stdout.txt&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">(),</span>
                <span class="s2">&quot;stderr.txt&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">decode</span><span class="p">(),</span>
                <span class="s2">&quot;t8n.sh+x&quot;</span><span class="p">:</span> <span class="n">t8n_script</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;failed to evaluate: &quot;</span> <span class="o">+</span> <span class="n">result</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>

    <span class="n">output</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">x</span> <span class="ow">in</span> <span class="n">output</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;alloc&quot;</span><span class="p">,</span> <span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="s2">&quot;body&quot;</span><span class="p">]]):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Malformed t8n output: missing &#39;alloc&#39;, &#39;result&#39; or &#39;body&#39;.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">debug_output_path</span><span class="p">:</span>
        <span class="n">dump_files_to_directory</span><span class="p">(</span>
            <span class="n">debug_output_path</span><span class="p">,</span>
            <span class="p">{</span>
                <span class="s2">&quot;output/alloc.json&quot;</span><span class="p">:</span> <span class="n">output</span><span class="p">[</span><span class="s2">&quot;alloc&quot;</span><span class="p">],</span>
                <span class="s2">&quot;output/result.json&quot;</span><span class="p">:</span> <span class="n">output</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">],</span>
                <span class="s2">&quot;output/txs.rlp&quot;</span><span class="p">:</span> <span class="n">output</span><span class="p">[</span><span class="s2">&quot;body&quot;</span><span class="p">],</span>
            <span class="p">},</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collect_traces</span><span class="p">(</span><span class="n">output</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">][</span><span class="s2">&quot;receipts&quot;</span><span class="p">],</span> <span class="n">temp_dir</span><span class="p">,</span> <span class="n">debug_output_path</span><span class="p">)</span>
        <span class="n">temp_dir</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">output</span><span class="p">[</span><span class="s2">&quot;alloc&quot;</span><span class="p">],</span> <span class="n">output</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="evm_transition_tool.transition_tool.TransitionTool.calc_state_root" class="doc doc-heading">
<code class="highlight language-python"><span class="n">calc_state_root</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">alloc</span><span class="p">,</span> <span class="n">fork</span><span class="p">,</span> <span class="n">debug_output_path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

<a href="#evm_transition_tool.transition_tool.TransitionTool.calc_state_root" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Calculate the state root for the given <code>alloc</code>.</p>

      <details class="quote">
        <summary>Source code in <code>src/evm_transition_tool/transition_tool.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">calc_state_root</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">alloc</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">,</span> <span class="n">debug_output_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Dict</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the state root for the given `alloc`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">env</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;currentCoinbase&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0000000000000000000000000000000000000000&quot;</span><span class="p">,</span>
        <span class="s2">&quot;currentDifficulty&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;currentGasLimit&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;currentNumber&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;currentTimestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">fork</span><span class="o">.</span><span class="n">header_base_fee_required</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
        <span class="n">env</span><span class="p">[</span><span class="s2">&quot;currentBaseFee&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;7&quot;</span>

    <span class="k">if</span> <span class="n">fork</span><span class="o">.</span><span class="n">header_prev_randao_required</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
        <span class="n">env</span><span class="p">[</span><span class="s2">&quot;currentRandom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>

    <span class="k">if</span> <span class="n">fork</span><span class="o">.</span><span class="n">header_withdrawals_required</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
        <span class="n">env</span><span class="p">[</span><span class="s2">&quot;withdrawals&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="n">fork</span><span class="o">.</span><span class="n">header_excess_blob_gas_required</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
        <span class="n">env</span><span class="p">[</span><span class="s2">&quot;currentExcessBlobGas&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>

    <span class="k">if</span> <span class="n">fork</span><span class="o">.</span><span class="n">header_beacon_root_required</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
        <span class="n">env</span><span class="p">[</span>
            <span class="s2">&quot;parentBeaconBlockRoot&quot;</span>
        <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>

    <span class="n">new_alloc</span><span class="p">,</span> <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span>
        <span class="n">alloc</span><span class="o">=</span><span class="n">alloc</span><span class="p">,</span>
        <span class="n">txs</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span>
        <span class="n">fork_name</span><span class="o">=</span><span class="n">fork</span><span class="o">.</span><span class="n">fork</span><span class="p">(</span><span class="n">block_number</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">debug_output_path</span><span class="o">=</span><span class="n">debug_output_path</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">state_root</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;stateRoot&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">state_root</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">state_root</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Unable to calculate state root&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">new_alloc</span><span class="p">,</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="n">state_root</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-class">



<h2 id="pytest_plugins.test_filler.test_filler.BaseTestConfig" class="doc doc-heading">
        <code>BaseTestConfig</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#pytest_plugins.test_filler.test_filler.BaseTestConfig" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">

  
      <p>General configuration that all tests must support.</p>


        <details class="quote">
          <summary>Source code in <code>src/ethereum_test_tools/spec/base_test.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">BaseTestConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    General configuration that all tests must support.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">disable_hive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Disable any hive-related properties that the output could contain.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="ethereum_test_tools.spec.base_test.BaseTestConfig.disable_hive" class="doc doc-heading">
<code class="highlight language-python"><span class="n">disable_hive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#ethereum_test_tools.spec.base_test.BaseTestConfig.disable_hive" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Disable any hive-related properties that the output could contain.</p>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-class">



<h2 id="pytest_plugins.test_filler.test_filler.BaseTest" class="doc doc-heading">
        <code>BaseTest</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#pytest_plugins.test_filler.test_filler.BaseTest" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">

  
      <p>Represents a base Ethereum test which must return a genesis and a
blockchain.</p>


        <details class="quote">
          <summary>Source code in <code>src/ethereum_test_tools/spec/base_test.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">BaseTest</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a base Ethereum test which must return a genesis and a</span>
<span class="sd">    blockchain.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">pre</span><span class="p">:</span> <span class="n">Mapping</span>
    <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">base_test_config</span><span class="p">:</span> <span class="n">BaseTestConfig</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">BaseTestConfig</span><span class="p">)</span>

    <span class="c1"># Transition tool specific fields</span>
    <span class="n">t8n_dump_dir</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">t8n_call_counter</span><span class="p">:</span> <span class="n">Iterator</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="n">count</span><span class="p">)</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">make_genesis</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">t8n</span><span class="p">:</span> <span class="n">TransitionTool</span><span class="p">,</span>
        <span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Alloc</span><span class="p">,</span> <span class="n">Bytes</span><span class="p">,</span> <span class="n">FixtureHeader</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a genesis block from the test definition.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">make_blocks</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">t8n</span><span class="p">:</span> <span class="n">TransitionTool</span><span class="p">,</span>
        <span class="n">genesis</span><span class="p">:</span> <span class="n">FixtureHeader</span><span class="p">,</span>
        <span class="n">pre</span><span class="p">:</span> <span class="n">Alloc</span><span class="p">,</span>
        <span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">,</span>
        <span class="n">chain_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">eips</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">FixtureBlock</span><span class="p">],</span> <span class="n">Hash</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate the blockchain that must be executed sequentially during test.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">pytest_parameter_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Must return the name of the parameter used in pytest to select this</span>
<span class="sd">        spec type as filler for the test.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">get_next_transition_tool_output_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the path to the next transition tool output file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">t8n_dump_dir</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">t8n_dump_dir</span><span class="p">,</span>
            <span class="nb">str</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t8n_call_counter</span><span class="p">)),</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-function">



<h3 id="ethereum_test_tools.spec.base_test.BaseTest.make_genesis" class="doc doc-heading">
<code class="highlight language-python"><span class="n">make_genesis</span><span class="p">(</span><span class="n">t8n</span><span class="p">,</span> <span class="n">fork</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#ethereum_test_tools.spec.base_test.BaseTest.make_genesis" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Create a genesis block from the test definition.</p>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/spec/base_test.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">make_genesis</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">t8n</span><span class="p">:</span> <span class="n">TransitionTool</span><span class="p">,</span>
    <span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Alloc</span><span class="p">,</span> <span class="n">Bytes</span><span class="p">,</span> <span class="n">FixtureHeader</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a genesis block from the test definition.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="ethereum_test_tools.spec.base_test.BaseTest.make_blocks" class="doc doc-heading">
<code class="highlight language-python"><span class="n">make_blocks</span><span class="p">(</span><span class="n">t8n</span><span class="p">,</span> <span class="n">genesis</span><span class="p">,</span> <span class="n">pre</span><span class="p">,</span> <span class="n">fork</span><span class="p">,</span> <span class="n">chain_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">eips</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#ethereum_test_tools.spec.base_test.BaseTest.make_blocks" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Generate the blockchain that must be executed sequentially during test.</p>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/spec/base_test.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">make_blocks</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">t8n</span><span class="p">:</span> <span class="n">TransitionTool</span><span class="p">,</span>
    <span class="n">genesis</span><span class="p">:</span> <span class="n">FixtureHeader</span><span class="p">,</span>
    <span class="n">pre</span><span class="p">:</span> <span class="n">Alloc</span><span class="p">,</span>
    <span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">,</span>
    <span class="n">chain_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">eips</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">FixtureBlock</span><span class="p">],</span> <span class="n">Hash</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate the blockchain that must be executed sequentially during test.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="ethereum_test_tools.spec.base_test.BaseTest.pytest_parameter_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pytest_parameter_name</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#ethereum_test_tools.spec.base_test.BaseTest.pytest_parameter_name" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Must return the name of the parameter used in pytest to select this
spec type as filler for the test.</p>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/spec/base_test.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">pytest_parameter_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Must return the name of the parameter used in pytest to select this</span>
<span class="sd">    spec type as filler for the test.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="ethereum_test_tools.spec.base_test.BaseTest.get_next_transition_tool_output_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_next_transition_tool_output_path</span><span class="p">()</span></code>

<a href="#ethereum_test_tools.spec.base_test.BaseTest.get_next_transition_tool_output_path" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Returns the path to the next transition tool output file.</p>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/spec/base_test.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_next_transition_tool_output_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the path to the next transition tool output file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">t8n_dump_dir</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
    <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">t8n_dump_dir</span><span class="p">,</span>
        <span class="nb">str</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t8n_call_counter</span><span class="p">)),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.pytest_configure" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pytest_configure</span><span class="p">(</span><span class="n">config</span><span class="p">)</span></code>

<a href="#pytest_plugins.test_filler.test_filler.pytest_configure" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Register the plugin's custom markers and process command-line options.</p>
<p>Custom marker registration:
<a href="https://docs.pytest.org/en/7.1.x/how-to/writing_plugins.html#registering-custom-markers">https://docs.pytest.org/en/7.1.x/how-to/writing_plugins.html#registering-custom-markers</a></p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">hookimpl</span><span class="p">(</span><span class="n">tryfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">pytest_configure</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Register the plugin&#39;s custom markers and process command-line options.</span>

<span class="sd">    Custom marker registration:</span>
<span class="sd">    https://docs.pytest.org/en/7.1.x/how-to/writing_plugins.html#registering-custom-markers</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span><span class="o">.</span><span class="n">addinivalue_line</span><span class="p">(</span>
        <span class="s2">&quot;markers&quot;</span><span class="p">,</span>
        <span class="s2">&quot;state_test: a test case that implement a single state transition test.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">addinivalue_line</span><span class="p">(</span>
        <span class="s2">&quot;markers&quot;</span><span class="p">,</span>
        <span class="s2">&quot;blockchain_test: a test case that implements a block transition test.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">addinivalue_line</span><span class="p">(</span>
        <span class="s2">&quot;markers&quot;</span><span class="p">,</span>
        <span class="s2">&quot;yul_test: a test case that compiles Yul code.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">addinivalue_line</span><span class="p">(</span>
        <span class="s2">&quot;markers&quot;</span><span class="p">,</span>
        <span class="s2">&quot;compile_yul_with(fork): Always compile Yul source using the corresponding evm version.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">collectonly</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="c1"># Instantiate the transition tool here to check that the binary path/trace option is valid.</span>
    <span class="c1"># This ensures we only raise an error once, if appropriate, instead of for every test.</span>
    <span class="n">t8n</span> <span class="o">=</span> <span class="n">TransitionTool</span><span class="o">.</span><span class="n">from_binary_path</span><span class="p">(</span>
        <span class="n">binary_path</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;evm_bin&quot;</span><span class="p">),</span> <span class="n">trace</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;evm_collect_traces&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;numprocesses&quot;</span><span class="p">),</span> <span class="nb">int</span><span class="p">)</span>
        <span class="ow">and</span> <span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;numprocesses&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="ow">and</span> <span class="s2">&quot;Besu&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">t8n</span><span class="o">.</span><span class="n">detect_binary_pattern</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span>
            <span class="s2">&quot;The Besu t8n tool does not work well with the xdist plugin; use -n=0.&quot;</span><span class="p">,</span>
            <span class="n">returncode</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">ExitCode</span><span class="o">.</span><span class="n">USAGE_ERROR</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-class">



<h2 id="pytest_plugins.test_filler.test_filler.EIPSpecTestItem" class="doc doc-heading">
        <code>EIPSpecTestItem</code>


<a href="#pytest_plugins.test_filler.test_filler.EIPSpecTestItem" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="_pytest.nodes.Item">Item</span></code></p>

  
      <p>Custom pytest test item to test EIP spec versions.</p>


        <details class="quote">
          <summary>Source code in <code>src/pytest_plugins/spec_version_checker/spec_version_checker.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">EIPSpecTestItem</span><span class="p">(</span><span class="n">Item</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Custom pytest test item to test EIP spec versions.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">module</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module</span> <span class="o">=</span> <span class="n">module</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_parent</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">module</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Public constructor to define new tests.</span>
<span class="sd">        https://docs.pytest.org/en/latest/reference/reference.html#pytest.nodes.Node.from_parent</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">from_parent</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test_eip_spec_version&quot;</span><span class="p">,</span> <span class="n">module</span><span class="o">=</span><span class="n">module</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">runtest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Define the test to execute for this item.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">test_eip_spec_version</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">reportinfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get location information for this test item to use test reports.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;spec_version_checker&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-function">



<h3 id="pytest_plugins.spec_version_checker.spec_version_checker.EIPSpecTestItem.from_parent" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_parent</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">module</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#pytest_plugins.spec_version_checker.spec_version_checker.EIPSpecTestItem.from_parent" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Public constructor to define new tests.
<a href="https://docs.pytest.org/en/latest/reference/reference.html#pytest.nodes.Node.from_parent">https://docs.pytest.org/en/latest/reference/reference.html#pytest.nodes.Node.from_parent</a></p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/spec_version_checker/spec_version_checker.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_parent</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">module</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Public constructor to define new tests.</span>
<span class="sd">    https://docs.pytest.org/en/latest/reference/reference.html#pytest.nodes.Node.from_parent</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">from_parent</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test_eip_spec_version&quot;</span><span class="p">,</span> <span class="n">module</span><span class="o">=</span><span class="n">module</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="pytest_plugins.spec_version_checker.spec_version_checker.EIPSpecTestItem.runtest" class="doc doc-heading">
<code class="highlight language-python"><span class="n">runtest</span><span class="p">()</span></code>

<a href="#pytest_plugins.spec_version_checker.spec_version_checker.EIPSpecTestItem.runtest" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Define the test to execute for this item.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/spec_version_checker/spec_version_checker.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">runtest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Define the test to execute for this item.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">test_eip_spec_version</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="pytest_plugins.spec_version_checker.spec_version_checker.EIPSpecTestItem.reportinfo" class="doc doc-heading">
<code class="highlight language-python"><span class="n">reportinfo</span><span class="p">()</span></code>

<a href="#pytest_plugins.spec_version_checker.spec_version_checker.EIPSpecTestItem.reportinfo" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Get location information for this test item to use test reports.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/spec_version_checker/spec_version_checker.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">reportinfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get location information for this test item to use test reports.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;spec_version_checker&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.pytest_report_header" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pytest_report_header</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">start_path</span><span class="p">)</span></code>

<a href="#pytest_plugins.test_filler.test_filler.pytest_report_header" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Add lines to pytest's console output header</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">hookimpl</span><span class="p">(</span><span class="n">trylast</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">pytest_report_header</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">start_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add lines to pytest&#39;s console output header&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">collectonly</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">binary_path</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;evm_bin&quot;</span><span class="p">)</span>
    <span class="n">t8n</span> <span class="o">=</span> <span class="n">TransitionTool</span><span class="o">.</span><span class="n">from_binary_path</span><span class="p">(</span><span class="n">binary_path</span><span class="o">=</span><span class="n">binary_path</span><span class="p">)</span>
    <span class="n">solc_version_string</span> <span class="o">=</span> <span class="n">Yul</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">binary</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;solc_bin&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">version</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">t8n</span><span class="o">.</span><span class="n">version</span><span class="p">()</span><span class="si">}</span><span class="s2">, solc version </span><span class="si">{</span><span class="n">solc_version_string</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.evm_bin" class="doc doc-heading">
<code class="highlight language-python"><span class="n">evm_bin</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

<a href="#pytest_plugins.test_filler.test_filler.evm_bin" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Returns the configured evm tool binary path.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">evm_bin</span><span class="p">(</span><span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the configured evm tool binary path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;evm_bin&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.solc_bin" class="doc doc-heading">
<code class="highlight language-python"><span class="n">solc_bin</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

<a href="#pytest_plugins.test_filler.test_filler.solc_bin" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Returns the configured solc binary path.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">solc_bin</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the configured solc binary path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;solc_bin&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.t8n" class="doc doc-heading">
<code class="highlight language-python"><span class="n">t8n</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">evm_bin</span><span class="p">)</span></code>

<a href="#pytest_plugins.test_filler.test_filler.t8n" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Returns the configured transition tool.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">t8n</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">evm_bin</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">TransitionTool</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the configured transition tool.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">t8n</span> <span class="o">=</span> <span class="n">TransitionTool</span><span class="o">.</span><span class="n">from_binary_path</span><span class="p">(</span>
        <span class="n">binary_path</span><span class="o">=</span><span class="n">evm_bin</span><span class="p">,</span> <span class="n">trace</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;evm_collect_traces&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">yield</span> <span class="n">t8n</span>
    <span class="n">t8n</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.base_test_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">base_test_config</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

<a href="#pytest_plugins.test_filler.test_filler.base_test_config" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Returns the base test configuration that all tests must use.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">base_test_config</span><span class="p">(</span><span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseTestConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the base test configuration that all tests must use.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">BaseTestConfig</span><span class="p">()</span>
    <span class="n">config</span><span class="o">.</span><span class="n">disable_hive</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;disable_hive&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">config</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.strip_test_prefix" class="doc doc-heading">
<code class="highlight language-python"><span class="n">strip_test_prefix</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

<a href="#pytest_plugins.test_filler.test_filler.strip_test_prefix" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Removes the test prefix from a test case name.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">strip_test_prefix</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes the test prefix from a test case name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">TEST_PREFIX</span> <span class="o">=</span> <span class="s2">&quot;test_&quot;</span>
    <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">TEST_PREFIX</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">name</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">TEST_PREFIX</span><span class="p">)</span> <span class="p">:]</span>
    <span class="k">return</span> <span class="n">name</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.convert_test_name_to_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">convert_test_name_to_path</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

<a href="#pytest_plugins.test_filler.test_filler.convert_test_name_to_path" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Converts a test name to a path.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">convert_test_name_to_path</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts a test name to a path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[\[=\-]&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-class">



<h2 id="pytest_plugins.test_filler.test_filler.FixtureCollector" class="doc doc-heading">
        <code>FixtureCollector</code>


<a href="#pytest_plugins.test_filler.test_filler.FixtureCollector" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">

  
      <p>Collects all fixtures generated by the test cases.</p>


        <details class="quote">
          <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">FixtureCollector</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Collects all fixtures generated by the test cases.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">all_fixtures</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span>
    <span class="n">output_dir</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">flat_output</span><span class="p">:</span> <span class="nb">bool</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">flat_output</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_fixtures</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_dir</span> <span class="o">=</span> <span class="n">output_dir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flat_output</span> <span class="o">=</span> <span class="n">flat_output</span>

    <span class="k">def</span> <span class="nf">add_fixture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">fixture</span><span class="p">:</span> <span class="n">Fixture</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a fixture to the list of fixtures of a given test case.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">get_module_dir</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Returns the directory of the test case module.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">dirname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
            <span class="n">basename</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
            <span class="n">basename</span> <span class="o">=</span> <span class="n">strip_test_prefix</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">basename</span><span class="p">))</span>
            <span class="n">module_path_no_ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirname</span><span class="p">,</span> <span class="n">basename</span><span class="p">)</span>
            <span class="n">module_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span>
                <span class="n">module_path_no_ext</span><span class="p">,</span>
                <span class="n">item</span><span class="o">.</span><span class="n">funcargs</span><span class="p">[</span><span class="s2">&quot;filler_path&quot;</span><span class="p">],</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">module_dir</span>

        <span class="n">module_dir</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">strip_test_prefix</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">originalname</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flat_output</span>
            <span class="k">else</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">get_module_dir</span><span class="p">(</span><span class="n">item</span><span class="p">),</span>
                <span class="n">strip_test_prefix</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">originalname</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">module_dir</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_fixtures</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">all_fixtures</span><span class="p">[</span><span class="n">module_dir</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;.*?\[(.*)\]&quot;</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">m</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Could not parse test name: &quot;</span> <span class="o">+</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fixture</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">+=</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">fixture</span><span class="o">.</span><span class="n">name</span>
        <span class="n">jsonFixture</span> <span class="o">=</span> <span class="n">fixture</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_fixtures</span><span class="p">[</span><span class="n">module_dir</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">name</span><span class="p">,</span> <span class="n">jsonFixture</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">dump_fixtures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Dumps all collected fixtures to their respective files.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">module_file</span><span class="p">,</span> <span class="n">fixtures</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_fixtures</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">output_json</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">name_fixture</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">fixtures</span><span class="p">):</span>
                <span class="n">name</span><span class="p">,</span> <span class="n">fixture</span> <span class="o">=</span> <span class="n">name_fixture</span>
                <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">name</span>
                <span class="n">output_json</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">fixture</span>
            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">module_file</span> <span class="o">+</span> <span class="s2">&quot;.json&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">flat_output</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">output_json</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-function">



<h3 id="pytest_plugins.test_filler.test_filler.FixtureCollector.add_fixture" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_fixture</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">fixture</span><span class="p">)</span></code>

<a href="#pytest_plugins.test_filler.test_filler.FixtureCollector.add_fixture" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Adds a fixture to the list of fixtures of a given test case.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_fixture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">fixture</span><span class="p">:</span> <span class="n">Fixture</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a fixture to the list of fixtures of a given test case.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get_module_dir</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the directory of the test case module.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dirname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="n">basename</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="n">basename</span> <span class="o">=</span> <span class="n">strip_test_prefix</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">basename</span><span class="p">))</span>
        <span class="n">module_path_no_ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirname</span><span class="p">,</span> <span class="n">basename</span><span class="p">)</span>
        <span class="n">module_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span>
            <span class="n">module_path_no_ext</span><span class="p">,</span>
            <span class="n">item</span><span class="o">.</span><span class="n">funcargs</span><span class="p">[</span><span class="s2">&quot;filler_path&quot;</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">module_dir</span>

    <span class="n">module_dir</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">strip_test_prefix</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">originalname</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flat_output</span>
        <span class="k">else</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">get_module_dir</span><span class="p">(</span><span class="n">item</span><span class="p">),</span>
            <span class="n">strip_test_prefix</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">originalname</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">module_dir</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_fixtures</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_fixtures</span><span class="p">[</span><span class="n">module_dir</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;.*?\[(.*)\]&quot;</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">m</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Could not parse test name: &quot;</span> <span class="o">+</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">fixture</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">+=</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">fixture</span><span class="o">.</span><span class="n">name</span>
    <span class="n">jsonFixture</span> <span class="o">=</span> <span class="n">fixture</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">all_fixtures</span><span class="p">[</span><span class="n">module_dir</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">name</span><span class="p">,</span> <span class="n">jsonFixture</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="pytest_plugins.test_filler.test_filler.FixtureCollector.dump_fixtures" class="doc doc-heading">
<code class="highlight language-python"><span class="n">dump_fixtures</span><span class="p">()</span></code>

<a href="#pytest_plugins.test_filler.test_filler.FixtureCollector.dump_fixtures" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Dumps all collected fixtures to their respective files.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">dump_fixtures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Dumps all collected fixtures to their respective files.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">module_file</span><span class="p">,</span> <span class="n">fixtures</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_fixtures</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">output_json</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">name_fixture</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">fixtures</span><span class="p">):</span>
            <span class="n">name</span><span class="p">,</span> <span class="n">fixture</span> <span class="o">=</span> <span class="n">name_fixture</span>
            <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">name</span>
            <span class="n">output_json</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">fixture</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">module_file</span> <span class="o">+</span> <span class="s2">&quot;.json&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">flat_output</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">output_json</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.fixture_collector" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fixture_collector</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

<a href="#pytest_plugins.test_filler.test_filler.fixture_collector" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Returns the configured fixture collector instance used for all tests
in one test module.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;module&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fixture_collector</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the configured fixture collector instance used for all tests</span>
<span class="sd">    in one test module.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fixture_collector</span> <span class="o">=</span> <span class="n">FixtureCollector</span><span class="p">(</span>
        <span class="n">output_dir</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;output&quot;</span><span class="p">),</span>
        <span class="n">flat_output</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;flat_output&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="k">yield</span> <span class="n">fixture_collector</span>
    <span class="n">fixture_collector</span><span class="o">.</span><span class="n">dump_fixtures</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.engine" class="doc doc-heading">
<code class="highlight language-python"><span class="n">engine</span><span class="p">()</span></code>

<a href="#pytest_plugins.test_filler.test_filler.engine" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Returns the sealEngine used in the generated test fixtures.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">engine</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the sealEngine used in the generated test fixtures.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;NoProof&quot;</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.filler_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">filler_path</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

<a href="#pytest_plugins.test_filler.test_filler.filler_path" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Returns the directory containing the tests to execute.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">filler_path</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the directory containing the tests to execute.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;filler_path&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.eips" class="doc doc-heading">
<code class="highlight language-python"><span class="n">eips</span><span class="p">()</span></code>

<a href="#pytest_plugins.test_filler.test_filler.eips" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>A fixture specifying that, by default, no EIPs should be activated for
tests.</p>
<p>This fixture (function) may be redefined in test filler modules in order
to overwrite this default and return a list of integers specifying which
EIPs should be activated for the tests in scope.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">eips</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A fixture specifying that, by default, no EIPs should be activated for</span>
<span class="sd">    tests.</span>

<span class="sd">    This fixture (function) may be redefined in test filler modules in order</span>
<span class="sd">    to overwrite this default and return a list of integers specifying which</span>
<span class="sd">    EIPs should be activated for the tests in scope.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.yul" class="doc doc-heading">
<code class="highlight language-python"><span class="n">yul</span><span class="p">(</span><span class="n">fork</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span></code>

<a href="#pytest_plugins.test_filler.test_filler.yul" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>A fixture that allows contract code to be defined with Yul code.</p>
<p>This fixture defines a class that wraps the ::ethereum_test_tools.Yul
class so that upon instantiation within the test case, it provides the
test case's current fork parameter. The forks is then available for use
in solc's arguments for the Yul code compilation.</p>
<p>Test cases can override the default value by specifying a fixed version
with the <a class="magiclink magiclink-github magiclink-mention" href="https://github.com/pytest" title="GitHub User: pytest">@pytest</a>.mark.compile_yul_with(FORK) marker.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">yul</span><span class="p">(</span><span class="n">fork</span><span class="p">:</span> <span class="n">Fork</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A fixture that allows contract code to be defined with Yul code.</span>

<span class="sd">    This fixture defines a class that wraps the ::ethereum_test_tools.Yul</span>
<span class="sd">    class so that upon instantiation within the test case, it provides the</span>
<span class="sd">    test case&#39;s current fork parameter. The forks is then available for use</span>
<span class="sd">    in solc&#39;s arguments for the Yul code compilation.</span>

<span class="sd">    Test cases can override the default value by specifying a fixed version</span>
<span class="sd">    with the @pytest.mark.compile_yul_with(FORK) marker.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">marker</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">get_closest_marker</span><span class="p">(</span><span class="s2">&quot;compile_yul_with&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">marker</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">marker</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">pytest</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: Expected one argument in &#39;compile_yul_with&#39; marker.&quot;</span>
            <span class="p">)</span>
        <span class="n">fork</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">fork_map</span><span class="p">[</span><span class="n">marker</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>

    <span class="k">class</span> <span class="nc">YulWrapper</span><span class="p">(</span><span class="n">Yul</span><span class="p">):</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">YulWrapper</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">fork</span><span class="o">=</span><span class="n">fork</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">YulWrapper</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.state_test" class="doc doc-heading">
<code class="highlight language-python"><span class="n">state_test</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">t8n</span><span class="p">,</span> <span class="n">fork</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">reference_spec</span><span class="p">,</span> <span class="n">eips</span><span class="p">,</span> <span class="n">fixture_collector</span><span class="p">,</span> <span class="n">base_test_config</span><span class="p">)</span></code>

<a href="#pytest_plugins.test_filler.test_filler.state_test" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Fixture used to instantiate an auto-fillable StateTest object from within
a test function.</p>
<p>Every test that defines a StateTest filler must explicitly specify this
fixture in its function arguments and set the StateTestWrapper's spec
property.</p>
<p>Implementation detail: It must be scoped on test function level to avoid
leakage between tests.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">state_test</span><span class="p">(</span>
    <span class="n">request</span><span class="p">,</span> <span class="n">t8n</span><span class="p">,</span> <span class="n">fork</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">reference_spec</span><span class="p">,</span> <span class="n">eips</span><span class="p">,</span> <span class="n">fixture_collector</span><span class="p">,</span> <span class="n">base_test_config</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StateTestFiller</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fixture used to instantiate an auto-fillable StateTest object from within</span>
<span class="sd">    a test function.</span>

<span class="sd">    Every test that defines a StateTest filler must explicitly specify this</span>
<span class="sd">    fixture in its function arguments and set the StateTestWrapper&#39;s spec</span>
<span class="sd">    property.</span>

<span class="sd">    Implementation detail: It must be scoped on test function level to avoid</span>
<span class="sd">    leakage between tests.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">StateTestWrapper</span><span class="p">(</span><span class="n">StateTest</span><span class="p">):</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;base_test_config&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">base_test_config</span>
            <span class="k">if</span> <span class="n">t8n_dump_dir</span> <span class="o">:=</span> <span class="n">request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;t8n_dump_dir&quot;</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;t8n_dump_dir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="n">t8n_dump_dir</span><span class="p">,</span> <span class="n">convert_test_name_to_path</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">StateTestWrapper</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">fixture_collector</span><span class="o">.</span><span class="n">add_fixture</span><span class="p">(</span>
                <span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="p">,</span>
                <span class="n">fill_test</span><span class="p">(</span>
                    <span class="n">t8n</span><span class="p">,</span>
                    <span class="bp">self</span><span class="p">,</span>
                    <span class="n">fork</span><span class="p">,</span>
                    <span class="n">engine</span><span class="p">,</span>
                    <span class="n">reference_spec</span><span class="p">,</span>
                    <span class="n">eips</span><span class="o">=</span><span class="n">eips</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="n">StateTestWrapper</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.blockchain_test" class="doc doc-heading">
<code class="highlight language-python"><span class="n">blockchain_test</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">t8n</span><span class="p">,</span> <span class="n">fork</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">reference_spec</span><span class="p">,</span> <span class="n">eips</span><span class="p">,</span> <span class="n">fixture_collector</span><span class="p">,</span> <span class="n">base_test_config</span><span class="p">)</span></code>

<a href="#pytest_plugins.test_filler.test_filler.blockchain_test" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Fixture used to define an auto-fillable BlockchainTest analogous to the
state_test fixture for StateTests.
See the state_test fixture docstring for details.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">blockchain_test</span><span class="p">(</span>
    <span class="n">request</span><span class="p">,</span> <span class="n">t8n</span><span class="p">,</span> <span class="n">fork</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">reference_spec</span><span class="p">,</span> <span class="n">eips</span><span class="p">,</span> <span class="n">fixture_collector</span><span class="p">,</span> <span class="n">base_test_config</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BlockchainTestFiller</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fixture used to define an auto-fillable BlockchainTest analogous to the</span>
<span class="sd">    state_test fixture for StateTests.</span>
<span class="sd">    See the state_test fixture docstring for details.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">BlockchainTestWrapper</span><span class="p">(</span><span class="n">BlockchainTest</span><span class="p">):</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;base_test_config&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">base_test_config</span>
            <span class="k">if</span> <span class="n">t8n_dump_dir</span> <span class="o">:=</span> <span class="n">request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;t8n_dump_dir&quot;</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;t8n_dump_dir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="n">t8n_dump_dir</span><span class="p">,</span> <span class="n">convert_test_name_to_path</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">BlockchainTestWrapper</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">fixture_collector</span><span class="o">.</span><span class="n">add_fixture</span><span class="p">(</span>
                <span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="p">,</span>
                <span class="n">fill_test</span><span class="p">(</span>
                    <span class="n">t8n</span><span class="p">,</span>
                    <span class="bp">self</span><span class="p">,</span>
                    <span class="n">fork</span><span class="p">,</span>
                    <span class="n">engine</span><span class="p">,</span>
                    <span class="n">reference_spec</span><span class="p">,</span>
                    <span class="n">eips</span><span class="o">=</span><span class="n">eips</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="n">BlockchainTestWrapper</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.pytest_collection_modifyitems" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pytest_collection_modifyitems</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span></code>

<a href="#pytest_plugins.test_filler.test_filler.pytest_collection_modifyitems" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>A pytest hook called during collection, after all items have been
collected.</p>
<p>Here we dynamically apply "state_test" or "blockchain_test" markers
to a test if the test function uses the corresponding fixture.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">pytest_collection_modifyitems</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A pytest hook called during collection, after all items have been</span>
<span class="sd">    collected.</span>

<span class="sd">    Here we dynamically apply &quot;state_test&quot; or &quot;blockchain_test&quot; markers</span>
<span class="sd">    to a test if the test function uses the corresponding fixture.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">EIPSpecTestItem</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="s2">&quot;state_test&quot;</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">fixturenames</span><span class="p">:</span>
            <span class="n">marker</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">state_test</span><span class="p">()</span>
            <span class="n">item</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s2">&quot;blockchain_test&quot;</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">fixturenames</span><span class="p">:</span>
            <span class="n">marker</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">blockchain_test</span><span class="p">()</span>
            <span class="n">item</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;yul&quot;</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">fixturenames</span><span class="p">:</span>
            <span class="n">marker</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">yul_test</span><span class="p">()</span>
            <span class="n">item</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.pytest_make_parametrize_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pytest_make_parametrize_id</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">argname</span><span class="p">)</span></code>

<a href="#pytest_plugins.test_filler.test_filler.pytest_make_parametrize_id" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Pytest hook called when generating test ids. We use this to generate
more readable test ids for the generated tests.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">pytest_make_parametrize_id</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">argname</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pytest hook called when generating test ids. We use this to generate</span>
<span class="sd">    more readable test ids for the generated tests.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">argname</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">val</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h2 id="pytest_plugins.test_filler.test_filler.pytest_runtest_call" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pytest_runtest_call</span><span class="p">(</span><span class="n">item</span><span class="p">)</span></code>

<a href="#pytest_plugins.test_filler.test_filler.pytest_runtest_call" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Pytest hook called in the context of test execution.</p>

      <details class="quote">
        <summary>Source code in <code>src/pytest_plugins/test_filler/test_filler.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">pytest_runtest_call</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pytest hook called in the context of test execution.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">EIPSpecTestItem</span><span class="p">):</span>
        <span class="k">return</span>

    <span class="k">class</span> <span class="nc">InvalidFiller</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;state_test&quot;</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">fixturenames</span> <span class="ow">and</span> <span class="s2">&quot;blockchain_test&quot;</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">fixturenames</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFiller</span><span class="p">(</span>
            <span class="s2">&quot;A filler should only implement either a state test or &quot;</span> <span class="s2">&quot;a blockchain test; not both.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Check that the test defines either test type as parameter.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">funcargs</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">SPEC_TYPES_PARAMETERS</span><span class="p">]):</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span>
            <span class="s2">&quot;Test must define either one of the following parameters to &quot;</span>
            <span class="o">+</span> <span class="s2">&quot;properly generate a test: &quot;</span>
            <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">SPEC_TYPES_PARAMETERS</span><span class="p">)</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-class">



<h2 id="pytest_plugins.test_filler.test_filler.Fixture" class="doc doc-heading">
        <code>Fixture</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#pytest_plugins.test_filler.test_filler.Fixture" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">

  
      <p>Cross-client compatible Ethereum test fixture.</p>


        <details class="quote">
          <summary>Source code in <code>src/ethereum_test_tools/common/types.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2630</span>
<span class="normal">2631</span>
<span class="normal">2632</span>
<span class="normal">2633</span>
<span class="normal">2634</span>
<span class="normal">2635</span>
<span class="normal">2636</span>
<span class="normal">2637</span>
<span class="normal">2638</span>
<span class="normal">2639</span>
<span class="normal">2640</span>
<span class="normal">2641</span>
<span class="normal">2642</span>
<span class="normal">2643</span>
<span class="normal">2644</span>
<span class="normal">2645</span>
<span class="normal">2646</span>
<span class="normal">2647</span>
<span class="normal">2648</span>
<span class="normal">2649</span>
<span class="normal">2650</span>
<span class="normal">2651</span>
<span class="normal">2652</span>
<span class="normal">2653</span>
<span class="normal">2654</span>
<span class="normal">2655</span>
<span class="normal">2656</span>
<span class="normal">2657</span>
<span class="normal">2658</span>
<span class="normal">2659</span>
<span class="normal">2660</span>
<span class="normal">2661</span>
<span class="normal">2662</span>
<span class="normal">2663</span>
<span class="normal">2664</span>
<span class="normal">2665</span>
<span class="normal">2666</span>
<span class="normal">2667</span>
<span class="normal">2668</span>
<span class="normal">2669</span>
<span class="normal">2670</span>
<span class="normal">2671</span>
<span class="normal">2672</span>
<span class="normal">2673</span>
<span class="normal">2674</span>
<span class="normal">2675</span>
<span class="normal">2676</span>
<span class="normal">2677</span>
<span class="normal">2678</span>
<span class="normal">2679</span>
<span class="normal">2680</span>
<span class="normal">2681</span>
<span class="normal">2682</span>
<span class="normal">2683</span>
<span class="normal">2684</span>
<span class="normal">2685</span>
<span class="normal">2686</span>
<span class="normal">2687</span>
<span class="normal">2688</span>
<span class="normal">2689</span>
<span class="normal">2690</span>
<span class="normal">2691</span>
<span class="normal">2692</span>
<span class="normal">2693</span>
<span class="normal">2694</span>
<span class="normal">2695</span>
<span class="normal">2696</span>
<span class="normal">2697</span>
<span class="normal">2698</span>
<span class="normal">2699</span>
<span class="normal">2700</span>
<span class="normal">2701</span>
<span class="normal">2702</span>
<span class="normal">2703</span>
<span class="normal">2704</span>
<span class="normal">2705</span>
<span class="normal">2706</span>
<span class="normal">2707</span>
<span class="normal">2708</span>
<span class="normal">2709</span>
<span class="normal">2710</span>
<span class="normal">2711</span>
<span class="normal">2712</span>
<span class="normal">2713</span>
<span class="normal">2714</span>
<span class="normal">2715</span>
<span class="normal">2716</span>
<span class="normal">2717</span>
<span class="normal">2718</span>
<span class="normal">2719</span>
<span class="normal">2720</span>
<span class="normal">2721</span>
<span class="normal">2722</span>
<span class="normal">2723</span>
<span class="normal">2724</span>
<span class="normal">2725</span>
<span class="normal">2726</span>
<span class="normal">2727</span>
<span class="normal">2728</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Fixture</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cross-client compatible Ethereum test fixture.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">info</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="o">=</span><span class="n">JSONEncoder</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;_info&quot;</span><span class="p">,</span>
            <span class="n">to_json</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">blocks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">FixtureBlock</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">json_encoder</span><span class="o">=</span><span class="n">JSONEncoder</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;blocks&quot;</span><span class="p">,</span>
            <span class="n">to_json</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">genesis</span><span class="p">:</span> <span class="n">FixtureHeader</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">json_encoder</span><span class="o">=</span><span class="n">JSONEncoder</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;genesisBlockHeader&quot;</span><span class="p">,</span>
            <span class="n">to_json</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">genesis_rlp</span><span class="p">:</span> <span class="n">Bytes</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">json_encoder</span><span class="o">=</span><span class="n">JSONEncoder</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;genesisRLP&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">head</span><span class="p">:</span> <span class="n">Hash</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">json_encoder</span><span class="o">=</span><span class="n">JSONEncoder</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;lastblockhash&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">fork</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">json_encoder</span><span class="o">=</span><span class="n">JSONEncoder</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;network&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">pre_state</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Account</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">json_encoder</span><span class="o">=</span><span class="n">JSONEncoder</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;pre&quot;</span><span class="p">,</span>
            <span class="n">cast_type</span><span class="o">=</span><span class="n">Alloc</span><span class="p">,</span>
            <span class="n">to_json</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">post_state</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Account</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="o">=</span><span class="n">JSONEncoder</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;postState&quot;</span><span class="p">,</span>
            <span class="n">cast_type</span><span class="o">=</span><span class="n">Alloc</span><span class="p">,</span>
            <span class="n">to_json</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">seal_engine</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">json_encoder</span><span class="o">=</span><span class="n">JSONEncoder</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;sealEngine&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="o">=</span><span class="n">JSONEncoder</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
            <span class="n">skip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="n">_json</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="o">=</span><span class="n">JSONEncoder</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
            <span class="n">skip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Post init hook to convert to JSON after instantiation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_json</span> <span class="o">=</span> <span class="n">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert to JSON.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_json</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Fixture not initialized&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_json</span><span class="p">[</span><span class="s2">&quot;_info&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_json</span>

    <span class="k">def</span> <span class="nf">fill_info</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">t8n</span><span class="p">:</span> <span class="n">TransitionTool</span><span class="p">,</span>
        <span class="n">ref_spec</span><span class="p">:</span> <span class="n">ReferenceSpec</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fill the info field for this fixture</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;filling-transition-tool&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">t8n</span><span class="o">.</span><span class="n">version</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ref_spec</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ref_spec</span><span class="o">.</span><span class="n">write_info</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-function">



<h3 id="ethereum_test_tools.common.types.Fixture.__post_init__" class="doc doc-heading">
<code class="highlight language-python"><span class="n">__post_init__</span><span class="p">()</span></code>

<a href="#ethereum_test_tools.common.types.Fixture.__post_init__" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Post init hook to convert to JSON after instantiation.</p>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/common/types.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2704</span>
<span class="normal">2705</span>
<span class="normal">2706</span>
<span class="normal">2707</span>
<span class="normal">2708</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Post init hook to convert to JSON after instantiation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_json</span> <span class="o">=</span> <span class="n">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="ethereum_test_tools.common.types.Fixture.to_json" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_json</span><span class="p">()</span></code>

<a href="#ethereum_test_tools.common.types.Fixture.to_json" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Convert to JSON.</p>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/common/types.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2710</span>
<span class="normal">2711</span>
<span class="normal">2712</span>
<span class="normal">2713</span>
<span class="normal">2714</span>
<span class="normal">2715</span>
<span class="normal">2716</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert to JSON.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_json</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Fixture not initialized&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_json</span><span class="p">[</span><span class="s2">&quot;_info&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_json</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="ethereum_test_tools.common.types.Fixture.fill_info" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fill_info</span><span class="p">(</span><span class="n">t8n</span><span class="p">,</span> <span class="n">ref_spec</span><span class="p">)</span></code>

<a href="#ethereum_test_tools.common.types.Fixture.fill_info" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Fill the info field for this fixture</p>

      <details class="quote">
        <summary>Source code in <code>src/ethereum_test_tools/common/types.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2718</span>
<span class="normal">2719</span>
<span class="normal">2720</span>
<span class="normal">2721</span>
<span class="normal">2722</span>
<span class="normal">2723</span>
<span class="normal">2724</span>
<span class="normal">2725</span>
<span class="normal">2726</span>
<span class="normal">2727</span>
<span class="normal">2728</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fill_info</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">t8n</span><span class="p">:</span> <span class="n">TransitionTool</span><span class="p">,</span>
    <span class="n">ref_spec</span><span class="p">:</span> <span class="n">ReferenceSpec</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fill the info field for this fixture</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;filling-transition-tool&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">t8n</span><span class="o">.</span><span class="n">version</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ref_spec</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ref_spec</span><span class="o">.</span><span class="n">write_info</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright: 2023, Ethereum Community
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "search.suggest", "search.highlight", "content.tabs.link", "navigation.indexes", "navigation.instant", "navigation.tabs"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.b425cdc4.min.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>